{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{\"4BUI\":function(module,exports,__webpack_require__){var atob=__webpack_require__(\"tZOz\");module.exports=function(str){var output=str.replace(/-/g,\"+\").replace(/_/g,\"/\");switch(output.length%4){case 0:break;case 2:output+=\"==\";break;case 3:output+=\"=\";break;default:throw\"Illegal base64url string!\"}try{return function(str){return decodeURIComponent(atob(str).replace(/(.)/g,(function(m,p){var code=p.charCodeAt(0).toString(16).toUpperCase();return code.length<2&&(code=\"0\"+code),\"%\"+code})))}(output)}catch(err){return atob(output)}}},F4UR:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"routes\",(function(){return routes})),__webpack_require__.d(__webpack_exports__,\"LoginModule\",(function(){return login_module_LoginModule}));var common=__webpack_require__(\"DVwZ\"),fesm2015_router=__webpack_require__(\"4i9L\"),fesm2015_forms=__webpack_require__(\"P2P6\"),shared_module=__webpack_require__(\"PCNd\"),app_validators=__webpack_require__(\"VAss\"),app_settings=__webpack_require__(\"/RaO\"),lib=__webpack_require__(\"gdRx\"),core=__webpack_require__(\"I2fu\"),http=__webpack_require__(\"Is5F\"),sidenav=__webpack_require__(\"X7+G\"),flex=__webpack_require__(\"X6d8\"),card=__webpack_require__(\"GpQZ\"),fesm2015_button=__webpack_require__(\"08HT\"),icon=__webpack_require__(\"wzcP\"),form_field=__webpack_require__(\"Cq4z\"),input=__webpack_require__(\"zjsz\");function LoginComponent_mat_error_16_Template(rf,ctx){1&rf&&(core.hc(0,\"mat-error\"),core.Yc(1,\"Email is required\"),core.gc())}function LoginComponent_mat_error_17_Template(rf,ctx){1&rf&&(core.hc(0,\"mat-error\"),core.Yc(1,\"Invalid email address\"),core.gc())}function LoginComponent_mat_error_20_Template(rf,ctx){1&rf&&(core.hc(0,\"mat-error\"),core.Yc(1,\"Password is required\"),core.gc())}function LoginComponent_mat_error_21_Template(rf,ctx){1&rf&&(core.hc(0,\"mat-error\"),core.Yc(1,\"Password isn't long enough, minimum of 6 characters\"),core.gc())}class User{}const routes=[{path:\"\",component:(()=>{class LoginComponent{constructor(appSettings,fb,router,httpserv){this.appSettings=appSettings,this.fb=fb,this.router=router,this.httpserv=httpserv,this.username=\"\",this.password=\"\",this.UserSubmit=new User,this.settings=this.appSettings.settings,this.form=this.fb.group({email:[null,fesm2015_forms.v.compose([fesm2015_forms.v.required,app_validators.a])],password:[null,fesm2015_forms.v.compose([fesm2015_forms.v.required,fesm2015_forms.v.minLength(6)])]})}onSubmit(values){this.form.valid&&this.router.navigate([\"/\"])}Login(){this.newPass=this.password,this.UserSubmit.User_Email=this.username,this.UserSubmit.User_Password=this.newPass,this.httpserv.post(\"http://35.178.156.37/api/User/Login\",this.UserSubmit).subscribe(data=>{localStorage.setItem(\"jwtToken\",data.Token);var decoded=lib(data.Token);localStorage.setItem(\"currentUser\",decoded.unique_name),localStorage.setItem(\"loggedIn\",\"Yes\"),alert(localStorage.getItem(\"jwtToken\")),this.router.navigateByUrl(\"/farm\")},error=>{alert(\"Login failed\")})}ngAfterViewInit(){this.settings.loadingSpinner=!1}}return LoginComponent.ɵfac=function(t){return new(t||LoginComponent)(core.bc(app_settings.a),core.bc(fesm2015_forms.c),core.bc(fesm2015_router.d),core.bc(http.b))},LoginComponent.ɵcmp=core.Vb({type:LoginComponent,selectors:[[\"app-login\"]],decls:24,vars:7,consts:[[\"fxLayout\",\"row\",\"fxLayoutAlign\",\"center center\",1,\"h-100\"],[\"fxFlex\",\"80\",\"fxFlex.gt-sm\",\"30\",\"fxFlex.sm\",\"60\",3,\"formGroup\",\"ngSubmit\"],[1,\"p-0\",\"mat-elevation-z24\",\"box\"],[\"fxLayout\",\"column\",\"fxLayoutAlign\",\"center center\",1,\"bg-primary\",\"box-header\"],[\"mat-fab\",\"\",\"type\",\"button\",\"color\",\"accent\",1,\"mat-elevation-z12\",3,\"click\"],[\"mat-button\",\"\",\"routerLink\",\"/register\"],[\"fxLayout\",\"column\",\"fxLayoutAlign\",\"end center\",1,\"box-content\"],[\"fxLayout\",\"column\",\"fxLayoutAlign\",\"center center\",1,\"mat-elevation-z12\",\"box-content-inner\"],[1,\"box-content-header\"],[1,\"w-100\"],[\"matInput\",\"\",\"placeholder\",\"Email\",\"formControlName\",\"email\",3,\"ngModel\",\"ngModelChange\"],[4,\"ngIf\"],[\"matInput\",\"\",\"type\",\"password\",\"placeholder\",\"Password\",\"formControlName\",\"password\",3,\"ngModel\",\"ngModelChange\"],[\"mat-raised-button\",\"\",\"color\",\"primary\",\"type\",\"submit\",1,\"mat-elevation-z12\",\"box-button\"]],template:function(rf,ctx){1&rf&&(core.hc(0,\"mat-sidenav-container\"),core.hc(1,\"div\",0),core.hc(2,\"form\",1),core.pc(\"ngSubmit\",(function($event){return ctx.Login()})),core.hc(3,\"mat-card\",2),core.hc(4,\"div\",3),core.hc(5,\"button\",4),core.pc(\"click\",(function($event){return ctx.onSubmit(ctx.form.value)})),core.hc(6,\"mat-icon\"),core.Yc(7,\"exit_to_app\"),core.gc(),core.gc(),core.hc(8,\"a\",5),core.Yc(9,\"Don't have an account? Sign up now!\"),core.gc(),core.gc(),core.hc(10,\"mat-card-content\",6),core.hc(11,\"mat-card\",7),core.hc(12,\"span\",8),core.Yc(13,\"member login\"),core.gc(),core.hc(14,\"mat-form-field\",9),core.hc(15,\"input\",10),core.pc(\"ngModelChange\",(function($event){return ctx.username=$event})),core.gc(),core.Wc(16,LoginComponent_mat_error_16_Template,2,0,\"mat-error\",11),core.Wc(17,LoginComponent_mat_error_17_Template,2,0,\"mat-error\",11),core.gc(),core.hc(18,\"mat-form-field\",9),core.hc(19,\"input\",12),core.pc(\"ngModelChange\",(function($event){return ctx.password=$event})),core.gc(),core.Wc(20,LoginComponent_mat_error_20_Template,2,0,\"mat-error\",11),core.Wc(21,LoginComponent_mat_error_21_Template,2,0,\"mat-error\",11),core.gc(),core.gc(),core.hc(22,\"button\",13),core.Yc(23,\"SIGN IN\"),core.gc(),core.gc(),core.gc(),core.gc(),core.gc(),core.gc()),2&rf&&(core.Nb(2),core.Ac(\"formGroup\",ctx.form),core.Nb(13),core.Ac(\"ngModel\",ctx.username),core.Nb(1),core.Ac(\"ngIf\",null==ctx.form.controls.email.errors?null:ctx.form.controls.email.errors.required),core.Nb(1),core.Ac(\"ngIf\",ctx.form.controls.email.hasError(\"invalidEmail\")),core.Nb(2),core.Ac(\"ngModel\",ctx.password),core.Nb(1),core.Ac(\"ngIf\",null==ctx.form.controls.password.errors?null:ctx.form.controls.password.errors.required),core.Nb(1),core.Ac(\"ngIf\",ctx.form.controls.password.hasError(\"minlength\")))},directives:[sidenav.b,flex.c,flex.b,fesm2015_forms.x,fesm2015_forms.o,flex.a,fesm2015_forms.g,card.a,fesm2015_button.b,icon.a,fesm2015_button.a,fesm2015_router.g,card.d,form_field.b,input.b,fesm2015_forms.b,fesm2015_forms.n,fesm2015_forms.f,common.n,form_field.a],encapsulation:2}),LoginComponent})(),pathMatch:\"full\"}];let login_module_LoginModule=(()=>{class LoginModule{}return LoginModule.ɵmod=core.Zb({type:LoginModule}),LoginModule.ɵinj=core.Yb({factory:function(t){return new(t||LoginModule)},imports:[[common.c,fesm2015_router.h.forChild(routes),fesm2015_forms.h,fesm2015_forms.t,shared_module.a]]}),LoginModule})()},gdRx:function(module,exports,__webpack_require__){\"use strict\";var base64_url_decode=__webpack_require__(\"4BUI\");function InvalidTokenError(message){this.message=message}(InvalidTokenError.prototype=new Error).name=\"InvalidTokenError\",module.exports=function(token,options){if(\"string\"!=typeof token)throw new InvalidTokenError(\"Invalid token specified\");var pos=!0===(options=options||{}).header?0:1;try{return JSON.parse(base64_url_decode(token.split(\".\")[pos]))}catch(e){throw new InvalidTokenError(\"Invalid token specified: \"+e.message)}},module.exports.InvalidTokenError=InvalidTokenError},tZOz:function(module,exports){function InvalidCharacterError(message){this.message=message}(InvalidCharacterError.prototype=new Error).name=\"InvalidCharacterError\",module.exports=\"undefined\"!=typeof window&&window.atob&&window.atob.bind(window)||function(input){var str=String(input).replace(/=+$/,\"\");if(str.length%4==1)throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");for(var bs,buffer,bc=0,idx=0,output=\"\";buffer=str.charAt(idx++);~buffer&&(bs=bc%4?64*bs+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0)buffer=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(buffer);return output}}}]);","extractedComments":[]}