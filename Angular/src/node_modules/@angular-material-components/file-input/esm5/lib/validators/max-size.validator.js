/**
 * @fileoverview added by tsickle
 * Generated from: lib/validators/max-size.validator.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Validator for size of file
 * @param {?} max Max of size of file (in bytes)
 * @return {?}
 */
export function MaxSizeValidator(max) {
    return (/**
     * @param {?} ctrl
     * @return {?}
     */
    function (ctrl) {
        max = Number(max);
        if (isNaN(max)) {
            throw 'MaxSizeValidator: max of size of file is invalid';
        }
        if (!ctrl.value)
            return null;
        /** @type {?} */
        var files = ctrl.value;
        if (!Array.isArray(ctrl.value)) {
            files = [ctrl.value];
        }
        if (!files.length)
            return null;
        /** @type {?} */
        var add = (/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) { return a + b; });
        /** @type {?} */
        var sumSize = files.map((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.size; })).reduce(add);
        if (sumSize > max) {
            return {
                maxSize: true
            };
        }
        return null;
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF4LXNpemUudmFsaWRhdG9yLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFuZ3VsYXItbWF0ZXJpYWwtY29tcG9uZW50cy9maWxlLWlucHV0LyIsInNvdXJjZXMiOlsibGliL3ZhbGlkYXRvcnMvbWF4LXNpemUudmFsaWRhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFNQSxNQUFNLFVBQVUsZ0JBQWdCLENBQUMsR0FBVztJQUN4Qzs7OztJQUFPLFVBQUMsSUFBcUI7UUFDekIsR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsQixJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNaLE1BQU0sa0RBQWtELENBQUM7U0FDNUQ7UUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUs7WUFBRSxPQUFPLElBQUksQ0FBQzs7WUFDekIsS0FBSyxHQUFXLElBQUksQ0FBQyxLQUFLO1FBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUM1QixLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDeEI7UUFDRCxJQUFHLENBQUMsS0FBSyxDQUFDLE1BQU07WUFBRSxPQUFPLElBQUksQ0FBQzs7WUFDeEIsR0FBRzs7Ozs7UUFBRyxVQUFDLENBQU0sRUFBRSxDQUFNLElBQWEsT0FBQSxDQUFDLEdBQUcsQ0FBQyxFQUFMLENBQUssQ0FBQTs7WUFDdkMsT0FBTyxHQUFHLEtBQUssQ0FBQyxHQUFHOzs7O1FBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsSUFBSSxFQUFOLENBQU0sRUFBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7UUFDbEQsSUFBSSxPQUFPLEdBQUcsR0FBRyxFQUFFO1lBQ2YsT0FBTztnQkFDSCxPQUFPLEVBQUUsSUFBSTthQUNoQixDQUFDO1NBQ0w7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDLEVBQUE7QUFDTCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWJzdHJhY3RDb250cm9sLCBWYWxpZGF0b3JGbiwgVmFsaWRhdGlvbkVycm9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0b3IgZm9yIHNpemUgb2YgZmlsZVxyXG4gKiBAcGFyYW0gbWF4IE1heCBvZiBzaXplIG9mIGZpbGUgKGluIGJ5dGVzKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIE1heFNpemVWYWxpZGF0b3IobWF4OiBudW1iZXIpOiBWYWxpZGF0b3JGbiB7XHJcbiAgICByZXR1cm4gKGN0cmw6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgfCBudWxsID0+IHtcclxuICAgICAgICBtYXggPSBOdW1iZXIobWF4KTtcclxuICAgICAgICBpZiAoaXNOYU4obWF4KSkge1xyXG4gICAgICAgICAgICB0aHJvdyAnTWF4U2l6ZVZhbGlkYXRvcjogbWF4IG9mIHNpemUgb2YgZmlsZSBpcyBpbnZhbGlkJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFjdHJsLnZhbHVlKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBsZXQgZmlsZXM6IEZpbGVbXSA9IGN0cmwudmFsdWU7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGN0cmwudmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGZpbGVzID0gW2N0cmwudmFsdWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighZmlsZXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBhZGQgPSAoYTogYW55LCBiOiBhbnkpOiBudW1iZXIgPT4gYSArIGI7XHJcbiAgICAgICAgY29uc3Qgc3VtU2l6ZSA9IGZpbGVzLm1hcCh4ID0+IHguc2l6ZSkucmVkdWNlKGFkZCk7XHJcbiAgICAgICAgaWYgKHN1bVNpemUgPiBtYXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1heFNpemU6IHRydWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn0iXX0=