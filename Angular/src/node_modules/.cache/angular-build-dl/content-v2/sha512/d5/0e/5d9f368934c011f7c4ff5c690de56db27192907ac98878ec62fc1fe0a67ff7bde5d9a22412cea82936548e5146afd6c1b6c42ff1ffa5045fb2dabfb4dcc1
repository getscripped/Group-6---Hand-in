{"version":3,"sources":["webpack:///node_modules/atoa/atoa.js","webpack:///node_modules/contra/debounce.js","webpack:///node_modules/contra/emitter.js","webpack:///node_modules/crossvent/src/crossvent.js","webpack:///node_modules/crossvent/src/eventmap.js","webpack:///node_modules/custom-event/index.js","webpack:///node_modules/dragula/classes.js","webpack:///node_modules/dragula/dragula.js","webpack:///node_modules/ng2-dragula/__ivy_ngcc__/dist/fesm2015/ng2-dragula.js","webpack:///src/app/pages/drag-drop/drag-drop.component.html","webpack:///node_modules/ticky/ticky-browser.js","webpack:///src/app/pages/drag-drop/drag-drop.component.scss","webpack:///src/app/pages/drag-drop/drag-drop.component.ts","webpack:///src/app/pages/drag-drop/drag-drop.module.ts"],"names":["module","exports","atoa","a","n","Array","prototype","slice","call","ticky","debounce","fn","args","ctx","run","apply","emitter","thing","options","opts","evt","undefined","on","type","push","once","_once","off","c","arguments","length","et","splice","indexOf","emit","emitterSnapshot","shift","forEach","listen","async","customEvent","eventmap","doc","global","document","addEvent","addEventEasy","removeEvent","removeEventEasy","hardCache","addEventListener","addEventHard","removeEventHard","add","remove","fabricate","fabricateEvent","el","capturing","attachEvent","wrap","removeEventListener","listener","unwrap","detachEvent","model","e","makeCustomEvent","makeClassicEvent","dispatchEvent","fireEvent","createEvent","initEvent","createEventObject","detail","wrapperFactory","wrapper","originalEvent","event","target","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","which","keyCode","element","i","find","item","eventname","ron","test","NativeCustomEvent","CustomEvent","useNative","p","foo","params","initCustomEvent","bubbles","cancelable","Boolean","cache","start","end","lookupClass","className","cached","lastIndex","RegExp","addClass","current","rmClass","replace","trim","rm","crossvent","classes","documentElement","dragula","initialContainers","len","isArray","_mirror","_source","_item","_offsetX","_offsetY","_moveX","_moveY","_initialSibling","_currentSibling","_copy","_renderTimer","_lastDropTarget","_grabbed","o","moves","always","accepts","invalid","invalidTarget","containers","isContainer","never","copy","copySortSource","revertOnSpill","removeOnSpill","direction","ignoreInputTextSelection","mirrorContainer","body","drake","manualStart","cancel","destroy","canMove","dragging","spillOver","spillOut","events","op","touchy","grab","release","eventualMovements","startBecauseMouseMoved","movements","preventGrabbed","clientX","clientY","ignore","whichMouseButton","metaKey","ctrlKey","context","canStart","isInput","focus","getCoord","elementBehindCursor","elementFromPoint","grabbed","offset","getOffset","left","top","renderMirrorImage","drag","handle","getParent","source","movable","nextEl","isCopy","cloneNode","drop","ungrab","getElementBehindPoint","dropTarget","findDropTarget","parent","removeChild","isInitialPlacement","cleanup","revert","reverts","initial","insertBefore","removeMirrorImage","clearTimeout","s","sibling","accepted","droppable","immediate","getImmediateChild","reference","getReference","x","y","style","changed","out","over","moved","rect","getBoundingClientRect","width","getRectWidth","height","getRectHeight","appendChild","horizontal","inside","outside","children","resolve","after","container","touch","mouseup","mousedown","mousemove","pointers","microsoft","navigator","pointerEnabled","msPointerEnabled","touches","buttons","button","getScroll","scrollProp","offsetProp","clientHeight","point","state","right","bottom","parentNode","tagName","isEditable","contentEditable","nextElementSibling","manually","nextSibling","nodeType","getEventHost","targetTouches","changedTouches","coord","host","missMap","pageX","pageY","Group","name","initEvents","EventTypes","Cancel","Cloned","Drag","DragEnd","Drop","Out","Over","Remove","Shadow","DropModel","RemoveModel","AllEvents","Object","keys","map","k","DrakeFactory","build","filterEvent","eventType","filterDragType","projector","input","pipe","elContainerSourceProjector","DragulaService","drakeFactory","dispatch$","groupName","dragend","elContainerSource","shadow","cloned","clone","original","cloneType","dropModel","sourceModel","targetModel","sourceIndex","targetIndex","removeModel","groups","group","existingGroup","Error","handleModels","setupEvents","dragElm","dragIndex","dropIndex","models","next","domIndexOf","dropElm","isCopying","copyItem","child","ɵfac","DragulaService_Factory","t","ɵprov","token","factory","ctorParameters","decorators","DragulaDirective","dragulaService","dragulaModelChange","changes","prev","previousValue","currentValue","firstChange","hadPreviousValue","hasNewValue","teardown","setup","dragulaModel","prevIndex","checkModel","createGroup","subscribe","subs","nativeElement","unsubscribe","itemToRemove","modelIndex","DragulaDirective_Factory","ɵdir","selectors","inputs","outputs","features","propDecorators","selector","DragulaModule","ngModule","providers","ɵmod","ɵinj","DragulaModule_Factory","ngJitMode","declarations","MockDrakeFactory","MockDrake","emitter$","callback","si","setImmediate","tick","setTimeout","DragDropComponent","appSettings","icons","colors","settings","template","routes","path","component","pathMatch","DragDropModule","imports","forChild","forRoot"],"mappings":"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","file":"pages-drag-drop-drag-drop-module-es5.js","sourcesContent":["module.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }\r\n","'use strict';\r\n\r\nvar ticky = require('ticky');\r\n\r\nmodule.exports = function debounce (fn, args, ctx) {\r\n  if (!fn) { return; }\r\n  ticky(function run () {\r\n    fn.apply(ctx || null, args || []);\r\n  });\r\n};\r\n","'use strict';\r\n\r\nvar atoa = require('atoa');\r\nvar debounce = require('./debounce');\r\n\r\nmodule.exports = function emitter (thing, options) {\r\n  var opts = options || {};\r\n  var evt = {};\r\n  if (thing === undefined) { thing = {}; }\r\n  thing.on = function (type, fn) {\r\n    if (!evt[type]) {\r\n      evt[type] = [fn];\r\n    } else {\r\n      evt[type].push(fn);\r\n    }\r\n    return thing;\r\n  };\r\n  thing.once = function (type, fn) {\r\n    fn._once = true; // thing.off(fn) still works!\r\n    thing.on(type, fn);\r\n    return thing;\r\n  };\r\n  thing.off = function (type, fn) {\r\n    var c = arguments.length;\r\n    if (c === 1) {\r\n      delete evt[type];\r\n    } else if (c === 0) {\r\n      evt = {};\r\n    } else {\r\n      var et = evt[type];\r\n      if (!et) { return thing; }\r\n      et.splice(et.indexOf(fn), 1);\r\n    }\r\n    return thing;\r\n  };\r\n  thing.emit = function () {\r\n    var args = atoa(arguments);\r\n    return thing.emitterSnapshot(args.shift()).apply(this, args);\r\n  };\r\n  thing.emitterSnapshot = function (type) {\r\n    var et = (evt[type] || []).slice(0);\r\n    return function () {\r\n      var args = atoa(arguments);\r\n      var ctx = this || thing;\r\n      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }\r\n      et.forEach(function emitter (listen) {\r\n        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }\r\n        if (listen._once) { thing.off(type, listen); }\r\n      });\r\n      return thing;\r\n    };\r\n  };\r\n  return thing;\r\n};\r\n","'use strict';\r\n\r\nvar customEvent = require('custom-event');\r\nvar eventmap = require('./eventmap');\r\nvar doc = global.document;\r\nvar addEvent = addEventEasy;\r\nvar removeEvent = removeEventEasy;\r\nvar hardCache = [];\r\n\r\nif (!global.addEventListener) {\r\n  addEvent = addEventHard;\r\n  removeEvent = removeEventHard;\r\n}\r\n\r\nmodule.exports = {\r\n  add: addEvent,\r\n  remove: removeEvent,\r\n  fabricate: fabricateEvent\r\n};\r\n\r\nfunction addEventEasy (el, type, fn, capturing) {\r\n  return el.addEventListener(type, fn, capturing);\r\n}\r\n\r\nfunction addEventHard (el, type, fn) {\r\n  return el.attachEvent('on' + type, wrap(el, type, fn));\r\n}\r\n\r\nfunction removeEventEasy (el, type, fn, capturing) {\r\n  return el.removeEventListener(type, fn, capturing);\r\n}\r\n\r\nfunction removeEventHard (el, type, fn) {\r\n  var listener = unwrap(el, type, fn);\r\n  if (listener) {\r\n    return el.detachEvent('on' + type, listener);\r\n  }\r\n}\r\n\r\nfunction fabricateEvent (el, type, model) {\r\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\r\n  if (el.dispatchEvent) {\r\n    el.dispatchEvent(e);\r\n  } else {\r\n    el.fireEvent('on' + type, e);\r\n  }\r\n  function makeClassicEvent () {\r\n    var e;\r\n    if (doc.createEvent) {\r\n      e = doc.createEvent('Event');\r\n      e.initEvent(type, true, true);\r\n    } else if (doc.createEventObject) {\r\n      e = doc.createEventObject();\r\n    }\r\n    return e;\r\n  }\r\n  function makeCustomEvent () {\r\n    return new customEvent(type, { detail: model });\r\n  }\r\n}\r\n\r\nfunction wrapperFactory (el, type, fn) {\r\n  return function wrapper (originalEvent) {\r\n    var e = originalEvent || global.event;\r\n    e.target = e.target || e.srcElement;\r\n    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };\r\n    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };\r\n    e.which = e.which || e.keyCode;\r\n    fn.call(el, e);\r\n  };\r\n}\r\n\r\nfunction wrap (el, type, fn) {\r\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\r\n  hardCache.push({\r\n    wrapper: wrapper,\r\n    element: el,\r\n    type: type,\r\n    fn: fn\r\n  });\r\n  return wrapper;\r\n}\r\n\r\nfunction unwrap (el, type, fn) {\r\n  var i = find(el, type, fn);\r\n  if (i) {\r\n    var wrapper = hardCache[i].wrapper;\r\n    hardCache.splice(i, 1); // free up a tad of memory\r\n    return wrapper;\r\n  }\r\n}\r\n\r\nfunction find (el, type, fn) {\r\n  var i, item;\r\n  for (i = 0; i < hardCache.length; i++) {\r\n    item = hardCache[i];\r\n    if (item.element === el && item.type === type && item.fn === fn) {\r\n      return i;\r\n    }\r\n  }\r\n}\r\n","'use strict';\r\n\r\nvar eventmap = [];\r\nvar eventname = '';\r\nvar ron = /^on/;\r\n\r\nfor (eventname in global) {\r\n  if (ron.test(eventname)) {\r\n    eventmap.push(eventname.slice(2));\r\n  }\r\n}\r\n\r\nmodule.exports = eventmap;\r\n","\r\nvar NativeCustomEvent = global.CustomEvent;\r\n\r\nfunction useNative () {\r\n  try {\r\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\r\n    return  'cat' === p.type && 'bar' === p.detail.foo;\r\n  } catch (e) {\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Cross-browser `CustomEvent` constructor.\r\n *\r\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\r\n *\r\n * @public\r\n */\r\n\r\nmodule.exports = useNative() ? NativeCustomEvent :\r\n\r\n// IE >= 9\r\n'function' === typeof document.createEvent ? function CustomEvent (type, params) {\r\n  var e = document.createEvent('CustomEvent');\r\n  if (params) {\r\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\r\n  } else {\r\n    e.initCustomEvent(type, false, false, void 0);\r\n  }\r\n  return e;\r\n} :\r\n\r\n// IE <= 8\r\nfunction CustomEvent (type, params) {\r\n  var e = document.createEventObject();\r\n  e.type = type;\r\n  if (params) {\r\n    e.bubbles = Boolean(params.bubbles);\r\n    e.cancelable = Boolean(params.cancelable);\r\n    e.detail = params.detail;\r\n  } else {\r\n    e.bubbles = false;\r\n    e.cancelable = false;\r\n    e.detail = void 0;\r\n  }\r\n  return e;\r\n}\r\n","'use strict';\r\n\r\nvar cache = {};\r\nvar start = '(?:^|\\\\s)';\r\nvar end = '(?:\\\\s|$)';\r\n\r\nfunction lookupClass (className) {\r\n  var cached = cache[className];\r\n  if (cached) {\r\n    cached.lastIndex = 0;\r\n  } else {\r\n    cache[className] = cached = new RegExp(start + className + end, 'g');\r\n  }\r\n  return cached;\r\n}\r\n\r\nfunction addClass (el, className) {\r\n  var current = el.className;\r\n  if (!current.length) {\r\n    el.className = className;\r\n  } else if (!lookupClass(className).test(current)) {\r\n    el.className += ' ' + className;\r\n  }\r\n}\r\n\r\nfunction rmClass (el, className) {\r\n  el.className = el.className.replace(lookupClass(className), ' ').trim();\r\n}\r\n\r\nmodule.exports = {\r\n  add: addClass,\r\n  rm: rmClass\r\n};\r\n","'use strict';\r\n\r\nvar emitter = require('contra/emitter');\r\nvar crossvent = require('crossvent');\r\nvar classes = require('./classes');\r\nvar doc = document;\r\nvar documentElement = doc.documentElement;\r\n\r\nfunction dragula (initialContainers, options) {\r\n  var len = arguments.length;\r\n  if (len === 1 && Array.isArray(initialContainers) === false) {\r\n    options = initialContainers;\r\n    initialContainers = [];\r\n  }\r\n  var _mirror; // mirror image\r\n  var _source; // source container\r\n  var _item; // item being dragged\r\n  var _offsetX; // reference x\r\n  var _offsetY; // reference y\r\n  var _moveX; // reference move x\r\n  var _moveY; // reference move y\r\n  var _initialSibling; // reference sibling when grabbed\r\n  var _currentSibling; // reference sibling now\r\n  var _copy; // item used for copying\r\n  var _renderTimer; // timer for setTimeout renderMirrorImage\r\n  var _lastDropTarget = null; // last container item was over\r\n  var _grabbed; // holds mousedown context until first mousemove\r\n\r\n  var o = options || {};\r\n  if (o.moves === void 0) { o.moves = always; }\r\n  if (o.accepts === void 0) { o.accepts = always; }\r\n  if (o.invalid === void 0) { o.invalid = invalidTarget; }\r\n  if (o.containers === void 0) { o.containers = initialContainers || []; }\r\n  if (o.isContainer === void 0) { o.isContainer = never; }\r\n  if (o.copy === void 0) { o.copy = false; }\r\n  if (o.copySortSource === void 0) { o.copySortSource = false; }\r\n  if (o.revertOnSpill === void 0) { o.revertOnSpill = false; }\r\n  if (o.removeOnSpill === void 0) { o.removeOnSpill = false; }\r\n  if (o.direction === void 0) { o.direction = 'vertical'; }\r\n  if (o.ignoreInputTextSelection === void 0) { o.ignoreInputTextSelection = true; }\r\n  if (o.mirrorContainer === void 0) { o.mirrorContainer = doc.body; }\r\n\r\n  var drake = emitter({\r\n    containers: o.containers,\r\n    start: manualStart,\r\n    end: end,\r\n    cancel: cancel,\r\n    remove: remove,\r\n    destroy: destroy,\r\n    canMove: canMove,\r\n    dragging: false\r\n  });\r\n\r\n  if (o.removeOnSpill === true) {\r\n    drake.on('over', spillOver).on('out', spillOut);\r\n  }\r\n\r\n  events();\r\n\r\n  return drake;\r\n\r\n  function isContainer (el) {\r\n    return drake.containers.indexOf(el) !== -1 || o.isContainer(el);\r\n  }\r\n\r\n  function events (remove) {\r\n    var op = remove ? 'remove' : 'add';\r\n    touchy(documentElement, op, 'mousedown', grab);\r\n    touchy(documentElement, op, 'mouseup', release);\r\n  }\r\n\r\n  function eventualMovements (remove) {\r\n    var op = remove ? 'remove' : 'add';\r\n    touchy(documentElement, op, 'mousemove', startBecauseMouseMoved);\r\n  }\r\n\r\n  function movements (remove) {\r\n    var op = remove ? 'remove' : 'add';\r\n    crossvent[op](documentElement, 'selectstart', preventGrabbed); // IE8\r\n    crossvent[op](documentElement, 'click', preventGrabbed);\r\n  }\r\n\r\n  function destroy () {\r\n    events(true);\r\n    release({});\r\n  }\r\n\r\n  function preventGrabbed (e) {\r\n    if (_grabbed) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  function grab (e) {\r\n    _moveX = e.clientX;\r\n    _moveY = e.clientY;\r\n\r\n    var ignore = whichMouseButton(e) !== 1 || e.metaKey || e.ctrlKey;\r\n    if (ignore) {\r\n      return; // we only care about honest-to-god left clicks and touch events\r\n    }\r\n    var item = e.target;\r\n    var context = canStart(item);\r\n    if (!context) {\r\n      return;\r\n    }\r\n    _grabbed = context;\r\n    eventualMovements();\r\n    if (e.type === 'mousedown') {\r\n      if (isInput(item)) { // see also: https://github.com/bevacqua/dragula/issues/208\r\n        item.focus(); // fixes https://github.com/bevacqua/dragula/issues/176\r\n      } else {\r\n        e.preventDefault(); // fixes https://github.com/bevacqua/dragula/issues/155\r\n      }\r\n    }\r\n  }\r\n\r\n  function startBecauseMouseMoved (e) {\r\n    if (!_grabbed) {\r\n      return;\r\n    }\r\n    if (whichMouseButton(e) === 0) {\r\n      release({});\r\n      return; // when text is selected on an input and then dragged, mouseup doesn't fire. this is our only hope\r\n    }\r\n    // truthy check fixes #239, equality fixes #207\r\n    if (e.clientX !== void 0 && e.clientX === _moveX && e.clientY !== void 0 && e.clientY === _moveY) {\r\n      return;\r\n    }\r\n    if (o.ignoreInputTextSelection) {\r\n      var clientX = getCoord('clientX', e);\r\n      var clientY = getCoord('clientY', e);\r\n      var elementBehindCursor = doc.elementFromPoint(clientX, clientY);\r\n      if (isInput(elementBehindCursor)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var grabbed = _grabbed; // call to end() unsets _grabbed\r\n    eventualMovements(true);\r\n    movements();\r\n    end();\r\n    start(grabbed);\r\n\r\n    var offset = getOffset(_item);\r\n    _offsetX = getCoord('pageX', e) - offset.left;\r\n    _offsetY = getCoord('pageY', e) - offset.top;\r\n\r\n    classes.add(_copy || _item, 'gu-transit');\r\n    renderMirrorImage();\r\n    drag(e);\r\n  }\r\n\r\n  function canStart (item) {\r\n    if (drake.dragging && _mirror) {\r\n      return;\r\n    }\r\n    if (isContainer(item)) {\r\n      return; // don't drag container itself\r\n    }\r\n    var handle = item;\r\n    while (getParent(item) && isContainer(getParent(item)) === false) {\r\n      if (o.invalid(item, handle)) {\r\n        return;\r\n      }\r\n      item = getParent(item); // drag target should be a top element\r\n      if (!item) {\r\n        return;\r\n      }\r\n    }\r\n    var source = getParent(item);\r\n    if (!source) {\r\n      return;\r\n    }\r\n    if (o.invalid(item, handle)) {\r\n      return;\r\n    }\r\n\r\n    var movable = o.moves(item, source, handle, nextEl(item));\r\n    if (!movable) {\r\n      return;\r\n    }\r\n\r\n    return {\r\n      item: item,\r\n      source: source\r\n    };\r\n  }\r\n\r\n  function canMove (item) {\r\n    return !!canStart(item);\r\n  }\r\n\r\n  function manualStart (item) {\r\n    var context = canStart(item);\r\n    if (context) {\r\n      start(context);\r\n    }\r\n  }\r\n\r\n  function start (context) {\r\n    if (isCopy(context.item, context.source)) {\r\n      _copy = context.item.cloneNode(true);\r\n      drake.emit('cloned', _copy, context.item, 'copy');\r\n    }\r\n\r\n    _source = context.source;\r\n    _item = context.item;\r\n    _initialSibling = _currentSibling = nextEl(context.item);\r\n\r\n    drake.dragging = true;\r\n    drake.emit('drag', _item, _source);\r\n  }\r\n\r\n  function invalidTarget () {\r\n    return false;\r\n  }\r\n\r\n  function end () {\r\n    if (!drake.dragging) {\r\n      return;\r\n    }\r\n    var item = _copy || _item;\r\n    drop(item, getParent(item));\r\n  }\r\n\r\n  function ungrab () {\r\n    _grabbed = false;\r\n    eventualMovements(true);\r\n    movements(true);\r\n  }\r\n\r\n  function release (e) {\r\n    ungrab();\r\n\r\n    if (!drake.dragging) {\r\n      return;\r\n    }\r\n    var item = _copy || _item;\r\n    var clientX = getCoord('clientX', e);\r\n    var clientY = getCoord('clientY', e);\r\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\r\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\r\n    if (dropTarget && ((_copy && o.copySortSource) || (!_copy || dropTarget !== _source))) {\r\n      drop(item, dropTarget);\r\n    } else if (o.removeOnSpill) {\r\n      remove();\r\n    } else {\r\n      cancel();\r\n    }\r\n  }\r\n\r\n  function drop (item, target) {\r\n    var parent = getParent(item);\r\n    if (_copy && o.copySortSource && target === _source) {\r\n      parent.removeChild(_item);\r\n    }\r\n    if (isInitialPlacement(target)) {\r\n      drake.emit('cancel', item, _source, _source);\r\n    } else {\r\n      drake.emit('drop', item, target, _source, _currentSibling);\r\n    }\r\n    cleanup();\r\n  }\r\n\r\n  function remove () {\r\n    if (!drake.dragging) {\r\n      return;\r\n    }\r\n    var item = _copy || _item;\r\n    var parent = getParent(item);\r\n    if (parent) {\r\n      parent.removeChild(item);\r\n    }\r\n    drake.emit(_copy ? 'cancel' : 'remove', item, parent, _source);\r\n    cleanup();\r\n  }\r\n\r\n  function cancel (revert) {\r\n    if (!drake.dragging) {\r\n      return;\r\n    }\r\n    var reverts = arguments.length > 0 ? revert : o.revertOnSpill;\r\n    var item = _copy || _item;\r\n    var parent = getParent(item);\r\n    var initial = isInitialPlacement(parent);\r\n    if (initial === false && reverts) {\r\n      if (_copy) {\r\n        if (parent) {\r\n          parent.removeChild(_copy);\r\n        }\r\n      } else {\r\n        _source.insertBefore(item, _initialSibling);\r\n      }\r\n    }\r\n    if (initial || reverts) {\r\n      drake.emit('cancel', item, _source, _source);\r\n    } else {\r\n      drake.emit('drop', item, parent, _source, _currentSibling);\r\n    }\r\n    cleanup();\r\n  }\r\n\r\n  function cleanup () {\r\n    var item = _copy || _item;\r\n    ungrab();\r\n    removeMirrorImage();\r\n    if (item) {\r\n      classes.rm(item, 'gu-transit');\r\n    }\r\n    if (_renderTimer) {\r\n      clearTimeout(_renderTimer);\r\n    }\r\n    drake.dragging = false;\r\n    if (_lastDropTarget) {\r\n      drake.emit('out', item, _lastDropTarget, _source);\r\n    }\r\n    drake.emit('dragend', item);\r\n    _source = _item = _copy = _initialSibling = _currentSibling = _renderTimer = _lastDropTarget = null;\r\n  }\r\n\r\n  function isInitialPlacement (target, s) {\r\n    var sibling;\r\n    if (s !== void 0) {\r\n      sibling = s;\r\n    } else if (_mirror) {\r\n      sibling = _currentSibling;\r\n    } else {\r\n      sibling = nextEl(_copy || _item);\r\n    }\r\n    return target === _source && sibling === _initialSibling;\r\n  }\r\n\r\n  function findDropTarget (elementBehindCursor, clientX, clientY) {\r\n    var target = elementBehindCursor;\r\n    while (target && !accepted()) {\r\n      target = getParent(target);\r\n    }\r\n    return target;\r\n\r\n    function accepted () {\r\n      var droppable = isContainer(target);\r\n      if (droppable === false) {\r\n        return false;\r\n      }\r\n\r\n      var immediate = getImmediateChild(target, elementBehindCursor);\r\n      var reference = getReference(target, immediate, clientX, clientY);\r\n      var initial = isInitialPlacement(target, reference);\r\n      if (initial) {\r\n        return true; // should always be able to drop it right back where it was\r\n      }\r\n      return o.accepts(_item, target, _source, reference);\r\n    }\r\n  }\r\n\r\n  function drag (e) {\r\n    if (!_mirror) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n\r\n    var clientX = getCoord('clientX', e);\r\n    var clientY = getCoord('clientY', e);\r\n    var x = clientX - _offsetX;\r\n    var y = clientY - _offsetY;\r\n\r\n    _mirror.style.left = x + 'px';\r\n    _mirror.style.top = y + 'px';\r\n\r\n    var item = _copy || _item;\r\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\r\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\r\n    var changed = dropTarget !== null && dropTarget !== _lastDropTarget;\r\n    if (changed || dropTarget === null) {\r\n      out();\r\n      _lastDropTarget = dropTarget;\r\n      over();\r\n    }\r\n    var parent = getParent(item);\r\n    if (dropTarget === _source && _copy && !o.copySortSource) {\r\n      if (parent) {\r\n        parent.removeChild(item);\r\n      }\r\n      return;\r\n    }\r\n    var reference;\r\n    var immediate = getImmediateChild(dropTarget, elementBehindCursor);\r\n    if (immediate !== null) {\r\n      reference = getReference(dropTarget, immediate, clientX, clientY);\r\n    } else if (o.revertOnSpill === true && !_copy) {\r\n      reference = _initialSibling;\r\n      dropTarget = _source;\r\n    } else {\r\n      if (_copy && parent) {\r\n        parent.removeChild(item);\r\n      }\r\n      return;\r\n    }\r\n    if (\r\n      (reference === null && changed) ||\r\n      reference !== item &&\r\n      reference !== nextEl(item)\r\n    ) {\r\n      _currentSibling = reference;\r\n      dropTarget.insertBefore(item, reference);\r\n      drake.emit('shadow', item, dropTarget, _source);\r\n    }\r\n    function moved (type) { drake.emit(type, item, _lastDropTarget, _source); }\r\n    function over () { if (changed) { moved('over'); } }\r\n    function out () { if (_lastDropTarget) { moved('out'); } }\r\n  }\r\n\r\n  function spillOver (el) {\r\n    classes.rm(el, 'gu-hide');\r\n  }\r\n\r\n  function spillOut (el) {\r\n    if (drake.dragging) { classes.add(el, 'gu-hide'); }\r\n  }\r\n\r\n  function renderMirrorImage () {\r\n    if (_mirror) {\r\n      return;\r\n    }\r\n    var rect = _item.getBoundingClientRect();\r\n    _mirror = _item.cloneNode(true);\r\n    _mirror.style.width = getRectWidth(rect) + 'px';\r\n    _mirror.style.height = getRectHeight(rect) + 'px';\r\n    classes.rm(_mirror, 'gu-transit');\r\n    classes.add(_mirror, 'gu-mirror');\r\n    o.mirrorContainer.appendChild(_mirror);\r\n    touchy(documentElement, 'add', 'mousemove', drag);\r\n    classes.add(o.mirrorContainer, 'gu-unselectable');\r\n    drake.emit('cloned', _mirror, _item, 'mirror');\r\n  }\r\n\r\n  function removeMirrorImage () {\r\n    if (_mirror) {\r\n      classes.rm(o.mirrorContainer, 'gu-unselectable');\r\n      touchy(documentElement, 'remove', 'mousemove', drag);\r\n      getParent(_mirror).removeChild(_mirror);\r\n      _mirror = null;\r\n    }\r\n  }\r\n\r\n  function getImmediateChild (dropTarget, target) {\r\n    var immediate = target;\r\n    while (immediate !== dropTarget && getParent(immediate) !== dropTarget) {\r\n      immediate = getParent(immediate);\r\n    }\r\n    if (immediate === documentElement) {\r\n      return null;\r\n    }\r\n    return immediate;\r\n  }\r\n\r\n  function getReference (dropTarget, target, x, y) {\r\n    var horizontal = o.direction === 'horizontal';\r\n    var reference = target !== dropTarget ? inside() : outside();\r\n    return reference;\r\n\r\n    function outside () { // slower, but able to figure out any position\r\n      var len = dropTarget.children.length;\r\n      var i;\r\n      var el;\r\n      var rect;\r\n      for (i = 0; i < len; i++) {\r\n        el = dropTarget.children[i];\r\n        rect = el.getBoundingClientRect();\r\n        if (horizontal && (rect.left + rect.width / 2) > x) { return el; }\r\n        if (!horizontal && (rect.top + rect.height / 2) > y) { return el; }\r\n      }\r\n      return null;\r\n    }\r\n\r\n    function inside () { // faster, but only available if dropped inside a child element\r\n      var rect = target.getBoundingClientRect();\r\n      if (horizontal) {\r\n        return resolve(x > rect.left + getRectWidth(rect) / 2);\r\n      }\r\n      return resolve(y > rect.top + getRectHeight(rect) / 2);\r\n    }\r\n\r\n    function resolve (after) {\r\n      return after ? nextEl(target) : target;\r\n    }\r\n  }\r\n\r\n  function isCopy (item, container) {\r\n    return typeof o.copy === 'boolean' ? o.copy : o.copy(item, container);\r\n  }\r\n}\r\n\r\nfunction touchy (el, op, type, fn) {\r\n  var touch = {\r\n    mouseup: 'touchend',\r\n    mousedown: 'touchstart',\r\n    mousemove: 'touchmove'\r\n  };\r\n  var pointers = {\r\n    mouseup: 'pointerup',\r\n    mousedown: 'pointerdown',\r\n    mousemove: 'pointermove'\r\n  };\r\n  var microsoft = {\r\n    mouseup: 'MSPointerUp',\r\n    mousedown: 'MSPointerDown',\r\n    mousemove: 'MSPointerMove'\r\n  };\r\n  if (global.navigator.pointerEnabled) {\r\n    crossvent[op](el, pointers[type], fn);\r\n  } else if (global.navigator.msPointerEnabled) {\r\n    crossvent[op](el, microsoft[type], fn);\r\n  } else {\r\n    crossvent[op](el, touch[type], fn);\r\n    crossvent[op](el, type, fn);\r\n  }\r\n}\r\n\r\nfunction whichMouseButton (e) {\r\n  if (e.touches !== void 0) { return e.touches.length; }\r\n  if (e.which !== void 0 && e.which !== 0) { return e.which; } // see https://github.com/bevacqua/dragula/issues/261\r\n  if (e.buttons !== void 0) { return e.buttons; }\r\n  var button = e.button;\r\n  if (button !== void 0) { // see https://github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575\r\n    return button & 1 ? 1 : button & 2 ? 3 : (button & 4 ? 2 : 0);\r\n  }\r\n}\r\n\r\nfunction getOffset (el) {\r\n  var rect = el.getBoundingClientRect();\r\n  return {\r\n    left: rect.left + getScroll('scrollLeft', 'pageXOffset'),\r\n    top: rect.top + getScroll('scrollTop', 'pageYOffset')\r\n  };\r\n}\r\n\r\nfunction getScroll (scrollProp, offsetProp) {\r\n  if (typeof global[offsetProp] !== 'undefined') {\r\n    return global[offsetProp];\r\n  }\r\n  if (documentElement.clientHeight) {\r\n    return documentElement[scrollProp];\r\n  }\r\n  return doc.body[scrollProp];\r\n}\r\n\r\nfunction getElementBehindPoint (point, x, y) {\r\n  var p = point || {};\r\n  var state = p.className;\r\n  var el;\r\n  p.className += ' gu-hide';\r\n  el = doc.elementFromPoint(x, y);\r\n  p.className = state;\r\n  return el;\r\n}\r\n\r\nfunction never () { return false; }\r\nfunction always () { return true; }\r\nfunction getRectWidth (rect) { return rect.width || (rect.right - rect.left); }\r\nfunction getRectHeight (rect) { return rect.height || (rect.bottom - rect.top); }\r\nfunction getParent (el) { return el.parentNode === doc ? null : el.parentNode; }\r\nfunction isInput (el) { return el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT' || isEditable(el); }\r\nfunction isEditable (el) {\r\n  if (!el) { return false; } // no parents were editable\r\n  if (el.contentEditable === 'false') { return false; } // stop the lookup\r\n  if (el.contentEditable === 'true') { return true; } // found a contentEditable element in the chain\r\n  return isEditable(getParent(el)); // contentEditable is set to 'inherit'\r\n}\r\n\r\nfunction nextEl (el) {\r\n  return el.nextElementSibling || manually();\r\n  function manually () {\r\n    var sibling = el;\r\n    do {\r\n      sibling = sibling.nextSibling;\r\n    } while (sibling && sibling.nodeType !== 1);\r\n    return sibling;\r\n  }\r\n}\r\n\r\nfunction getEventHost (e) {\r\n  // on touchend event, we have to use `e.changedTouches`\r\n  // see http://stackoverflow.com/questions/7192563/touchend-event-properties\r\n  // see https://github.com/bevacqua/dragula/issues/34\r\n  if (e.targetTouches && e.targetTouches.length) {\r\n    return e.targetTouches[0];\r\n  }\r\n  if (e.changedTouches && e.changedTouches.length) {\r\n    return e.changedTouches[0];\r\n  }\r\n  return e;\r\n}\r\n\r\nfunction getCoord (coord, e) {\r\n  var host = getEventHost(e);\r\n  var missMap = {\r\n    pageX: 'clientX', // IE8\r\n    pageY: 'clientY' // IE8\r\n  };\r\n  if (coord in missMap && !(coord in host) && missMap[coord] in host) {\r\n    coord = missMap[coord];\r\n  }\r\n  return host[coord];\r\n}\r\n\r\nmodule.exports = dragula;\r\n","import * as dragulaExpt from 'dragula';\r\nimport dragulaExpt__default, {  } from 'dragula';\r\nimport { Injectable, Optional, Directive, Input, Output, ElementRef, EventEmitter, NgModule } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { filter, map } from 'rxjs/operators';\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nimport * as ɵngcc0 from '@angular/core';\r\nclass Group {\r\n    /**\r\n     * @param {?} name\r\n     * @param {?} drake\r\n     * @param {?} options\r\n     */\r\n    constructor(name, drake, options) {\r\n        this.name = name;\r\n        this.drake = drake;\r\n        this.options = options;\r\n        this.initEvents = false;\r\n    }\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/** @enum {string} */\r\nconst EventTypes = {\r\n    Cancel: \"cancel\",\r\n    Cloned: \"cloned\",\r\n    Drag: \"drag\",\r\n    DragEnd: \"dragend\",\r\n    Drop: \"drop\",\r\n    Out: \"out\",\r\n    Over: \"over\",\r\n    Remove: \"remove\",\r\n    Shadow: \"shadow\",\r\n    DropModel: \"dropModel\",\r\n    RemoveModel: \"removeModel\",\r\n};\r\n/** @type {?} */\r\nconst AllEvents = Object.keys(EventTypes).map(k => /** @type {?} */ (EventTypes[/** @type {?} */ (k)]));\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/** @type {?} */\r\nconst dragula = dragulaExpt__default || dragulaExpt;\r\nclass DrakeFactory {\r\n    /**\r\n     * @param {?=} build\r\n     */\r\n    constructor(build = dragula) {\r\n        this.build = build;\r\n    }\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/** @type {?} */\r\nconst filterEvent = (eventType, filterDragType, projector) => (input) => {\r\n    return input.pipe(filter(({ event, name }) => {\r\n        return event === eventType\r\n            && (filterDragType === undefined || name === filterDragType);\r\n    }), map(({ name, args }) => projector(name, args)));\r\n};\r\n/** @type {?} */\r\nconst elContainerSourceProjector = (name, [el, container, source]) => ({ name, el, container, source });\r\nclass DragulaService {\r\n    /**\r\n     * @param {?=} drakeFactory\r\n     */\r\n    constructor(drakeFactory = null) {\r\n        this.drakeFactory = drakeFactory;\r\n        this.dispatch$ = new Subject();\r\n        this.drag = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.Drag, groupName, (name, [el, source]) => ({ name, el, source })));\r\n        this.dragend = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.DragEnd, groupName, (name, [el]) => ({ name, el })));\r\n        this.drop = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.Drop, groupName, (name, [el, target, source, sibling]) => {\r\n            return { name, el, target, source, sibling };\r\n        }));\r\n        this.elContainerSource = (eventType) => (groupName) => this.dispatch$.pipe(filterEvent(eventType, groupName, elContainerSourceProjector));\r\n        this.cancel = this.elContainerSource(EventTypes.Cancel);\r\n        this.remove = this.elContainerSource(EventTypes.Remove);\r\n        this.shadow = this.elContainerSource(EventTypes.Shadow);\r\n        this.over = this.elContainerSource(EventTypes.Over);\r\n        this.out = this.elContainerSource(EventTypes.Out);\r\n        this.cloned = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.Cloned, groupName, (name, [clone, original, cloneType]) => {\r\n            return { name, clone, original, cloneType };\r\n        }));\r\n        this.dropModel = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.DropModel, groupName, (name, [el, target, source, sibling, item, sourceModel, targetModel, sourceIndex, targetIndex]) => {\r\n            return { name, el, target, source, sibling, item, sourceModel, targetModel, sourceIndex, targetIndex };\r\n        }));\r\n        this.removeModel = (groupName) => this.dispatch$.pipe(filterEvent(EventTypes.RemoveModel, groupName, (name, [el, container, source, item, sourceModel, sourceIndex]) => {\r\n            return { name, el, container, source, item, sourceModel, sourceIndex };\r\n        }));\r\n        this.groups = {};\r\n        if (this.drakeFactory === null) {\r\n            this.drakeFactory = new DrakeFactory();\r\n        }\r\n    }\r\n    /**\r\n     * Public mainly for testing purposes. Prefer `createGroup()`.\r\n     * @param {?} group\r\n     * @return {?}\r\n     */\r\n    add(group) {\r\n        /** @type {?} */\r\n        let existingGroup = this.find(group.name);\r\n        if (existingGroup) {\r\n            throw new Error('Group named: \"' + group.name + '\" already exists.');\r\n        }\r\n        this.groups[group.name] = group;\r\n        this.handleModels(group);\r\n        this.setupEvents(group);\r\n        return group;\r\n    }\r\n    /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    find(name) {\r\n        return this.groups[name];\r\n    }\r\n    /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    destroy(name) {\r\n        /** @type {?} */\r\n        let group = this.find(name);\r\n        if (!group) {\r\n            return;\r\n        }\r\n        group.drake && group.drake.destroy();\r\n        delete this.groups[name];\r\n    }\r\n    /**\r\n     * Creates a group with the specified name and options.\r\n     *\r\n     * Note: formerly known as `setOptions`\r\n     * @template T\r\n     * @param {?} name\r\n     * @param {?} options\r\n     * @return {?}\r\n     */\r\n    createGroup(name, options) {\r\n        return this.add(new Group(name, this.drakeFactory.build([], options), options));\r\n    }\r\n    /**\r\n     * @param {?} __0\r\n     * @return {?}\r\n     */\r\n    handleModels({ name, drake, options }) {\r\n        /** @type {?} */\r\n        let dragElm;\r\n        /** @type {?} */\r\n        let dragIndex;\r\n        /** @type {?} */\r\n        let dropIndex;\r\n        drake.on('remove', (el, container, source) => {\r\n            if (!drake.models) {\r\n                return;\r\n            }\r\n            /** @type {?} */\r\n            let sourceModel = drake.models[drake.containers.indexOf(source)];\r\n            sourceModel = sourceModel.slice(0);\r\n            /** @type {?} */\r\n            const item = sourceModel.splice(dragIndex, 1)[0];\r\n            // console.log('REMOVE');\r\n            // console.log(sourceModel);\r\n            this.dispatch$.next({\r\n                event: EventTypes.RemoveModel,\r\n                name,\r\n                args: [el, container, source, item, sourceModel, dragIndex]\r\n            });\r\n        });\r\n        drake.on('drag', (el, source) => {\r\n            if (!drake.models) {\r\n                return;\r\n            }\r\n            dragElm = el;\r\n            dragIndex = this.domIndexOf(el, source);\r\n        });\r\n        drake.on('drop', (dropElm, target, source, sibling) => {\r\n            if (!drake.models || !target) {\r\n                return;\r\n            }\r\n            dropIndex = this.domIndexOf(dropElm, target);\r\n            /** @type {?} */\r\n            let sourceModel = drake.models[drake.containers.indexOf(source)];\r\n            /** @type {?} */\r\n            let targetModel = drake.models[drake.containers.indexOf(target)];\r\n            /** @type {?} */\r\n            let item;\r\n            if (target === source) {\r\n                sourceModel = sourceModel.slice(0);\r\n                item = sourceModel.splice(dragIndex, 1)[0];\r\n                sourceModel.splice(dropIndex, 0, item);\r\n                // this was true before we cloned and updated sourceModel,\r\n                // but targetModel still has the old value\r\n                targetModel = sourceModel;\r\n            }\r\n            else {\r\n                /** @type {?} */\r\n                let isCopying = dragElm !== dropElm;\r\n                item = sourceModel[dragIndex];\r\n                if (isCopying) {\r\n                    if (!options.copyItem) {\r\n                        throw new Error(\"If you have enabled `copy` on a group, you must provide a `copyItem` function.\");\r\n                    }\r\n                    item = options.copyItem(item);\r\n                }\r\n                if (!isCopying) {\r\n                    sourceModel = sourceModel.slice(0);\r\n                    sourceModel.splice(dragIndex, 1);\r\n                }\r\n                targetModel = targetModel.slice(0);\r\n                targetModel.splice(dropIndex, 0, item);\r\n                if (isCopying) {\r\n                    try {\r\n                        target.removeChild(dropElm);\r\n                    }\r\n                    catch (e) { }\r\n                }\r\n            }\r\n            this.dispatch$.next({\r\n                event: EventTypes.DropModel,\r\n                name,\r\n                args: [dropElm, target, source, sibling, item, sourceModel, targetModel, dragIndex, dropIndex]\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @param {?} group\r\n     * @return {?}\r\n     */\r\n    setupEvents(group) {\r\n        if (group.initEvents) {\r\n            return;\r\n        }\r\n        group.initEvents = true;\r\n        /** @type {?} */\r\n        const name = group.name;\r\n        /** @type {?} */\r\n        let emitter = (event) => {\r\n            group.drake.on(event, (...args) => {\r\n                this.dispatch$.next({ event, name, args });\r\n            });\r\n        };\r\n        AllEvents.forEach(emitter);\r\n    }\r\n    /**\r\n     * @param {?} child\r\n     * @param {?} parent\r\n     * @return {?}\r\n     */\r\n    domIndexOf(child, parent) {\r\n        return Array.prototype.indexOf.call(parent.children, child);\r\n    }\r\n}\r\nDragulaService.ɵfac = function DragulaService_Factory(t) { return new (t || DragulaService)(ɵngcc0.ɵɵinject(DrakeFactory, 8)); };\r\nDragulaService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: DragulaService, factory: DragulaService.ɵfac });\r\n/** @nocollapse */\r\nDragulaService.ctorParameters = () => [\r\n    { type: DrakeFactory, decorators: [{ type: Optional }] }\r\n];\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DragulaService, [{\r\n        type: Injectable\r\n    }], function () { return [{ type: DrakeFactory, decorators: [{\r\n                type: Optional\r\n            }] }]; }, null); })();\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nclass DragulaDirective {\r\n    /**\r\n     * @param {?} el\r\n     * @param {?} dragulaService\r\n     */\r\n    constructor(el, dragulaService) {\r\n        this.el = el;\r\n        this.dragulaService = dragulaService;\r\n        this.dragulaModelChange = new EventEmitter();\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    get container() {\r\n        return this.el && this.el.nativeElement;\r\n    }\r\n    /**\r\n     * @param {?} changes\r\n     * @return {?}\r\n     */\r\n    ngOnChanges(changes) {\r\n        if (changes && changes.dragula) {\r\n            const { previousValue: prev, currentValue: current, firstChange } = changes.dragula;\r\n            /** @type {?} */\r\n            let hadPreviousValue = !!prev;\r\n            /** @type {?} */\r\n            let hasNewValue = !!current;\r\n            // something -> null       =>  teardown only\r\n            // something -> something  =>  teardown, then setup\r\n            //      null -> something  =>  setup only\r\n            //\r\n            //      null -> null (precluded by fact of change being present)\r\n            if (hadPreviousValue) {\r\n                this.teardown(prev);\r\n            }\r\n            if (hasNewValue) {\r\n                this.setup();\r\n            }\r\n        }\r\n        else if (changes && changes.dragulaModel) {\r\n            const { previousValue: prev, currentValue: current, firstChange } = changes.dragulaModel;\r\n            const { drake } = this.group;\r\n            if (this.dragula && drake) {\r\n                drake.models = drake.models || [];\r\n                /** @type {?} */\r\n                let prevIndex = drake.models.indexOf(prev);\r\n                if (prevIndex !== -1) {\r\n                    // delete the previous\r\n                    drake.models.splice(prevIndex, 1);\r\n                    // maybe insert a new one at the same spot\r\n                    if (!!current) {\r\n                        drake.models.splice(prevIndex, 0, current);\r\n                    }\r\n                }\r\n                else if (!!current) {\r\n                    // no previous one to remove; just push this one.\r\n                    drake.models.push(current);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    setup() {\r\n        /** @type {?} */\r\n        let checkModel = (group) => {\r\n            if (this.dragulaModel) {\r\n                if (group.drake.models) {\r\n                    group.drake.models.push(this.dragulaModel);\r\n                }\r\n                else {\r\n                    group.drake.models = [this.dragulaModel];\r\n                }\r\n            }\r\n        };\r\n        /** @type {?} */\r\n        let group = this.dragulaService.find(this.dragula);\r\n        if (!group) {\r\n            /** @type {?} */\r\n            let options = {};\r\n            group = this.dragulaService.createGroup(this.dragula, options);\r\n        }\r\n        // ensure model and container element are pushed\r\n        checkModel(group);\r\n        group.drake.containers.push(this.container);\r\n        this.subscribe(this.dragula);\r\n        this.group = group;\r\n    }\r\n    /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    subscribe(name) {\r\n        this.subs = new Subscription();\r\n        this.subs.add(this.dragulaService\r\n            .dropModel(name)\r\n            .subscribe(({ source, target, sourceModel, targetModel }) => {\r\n            if (source === this.el.nativeElement) {\r\n                this.dragulaModelChange.emit(sourceModel);\r\n            }\r\n            else if (target === this.el.nativeElement) {\r\n                this.dragulaModelChange.emit(targetModel);\r\n            }\r\n        }));\r\n        this.subs.add(this.dragulaService\r\n            .removeModel(name)\r\n            .subscribe(({ source, sourceModel }) => {\r\n            if (source === this.el.nativeElement) {\r\n                this.dragulaModelChange.emit(sourceModel);\r\n            }\r\n        }));\r\n    }\r\n    /**\r\n     * @param {?} groupName\r\n     * @return {?}\r\n     */\r\n    teardown(groupName) {\r\n        if (this.subs) {\r\n            this.subs.unsubscribe();\r\n        }\r\n        /** @type {?} */\r\n        const group = this.dragulaService.find(groupName);\r\n        if (group) {\r\n            /** @type {?} */\r\n            const itemToRemove = group.drake.containers.indexOf(this.el.nativeElement);\r\n            if (itemToRemove !== -1) {\r\n                group.drake.containers.splice(itemToRemove, 1);\r\n            }\r\n            if (this.dragulaModel && group.drake && group.drake.models) {\r\n                /** @type {?} */\r\n                let modelIndex = group.drake.models.indexOf(this.dragulaModel);\r\n                if (modelIndex !== -1) {\r\n                    group.drake.models.splice(modelIndex, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    ngOnDestroy() {\r\n        this.teardown(this.dragula);\r\n    }\r\n}\r\nDragulaDirective.ɵfac = function DragulaDirective_Factory(t) { return new (t || DragulaDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(DragulaService)); };\r\nDragulaDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: DragulaDirective, selectors: [[\"\", \"dragula\", \"\"]], inputs: { dragula: \"dragula\", dragulaModel: \"dragulaModel\" }, outputs: { dragulaModelChange: \"dragulaModelChange\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature()] });\r\n/** @nocollapse */\r\nDragulaDirective.ctorParameters = () => [\r\n    { type: ElementRef },\r\n    { type: DragulaService }\r\n];\r\nDragulaDirective.propDecorators = {\r\n    dragula: [{ type: Input }],\r\n    dragulaModel: [{ type: Input }],\r\n    dragulaModelChange: [{ type: Output }]\r\n};\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DragulaDirective, [{\r\n        type: Directive,\r\n        args: [{ selector: '[dragula]' }]\r\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: DragulaService }]; }, { dragulaModelChange: [{\r\n            type: Output\r\n        }], dragula: [{\r\n            type: Input\r\n        }], dragulaModel: [{\r\n            type: Input\r\n        }] }); })();\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nclass DragulaModule {\r\n    /**\r\n     * @return {?}\r\n     */\r\n    static forRoot() {\r\n        return {\r\n            ngModule: DragulaModule,\r\n            providers: [DragulaService]\r\n        };\r\n    }\r\n}\r\nDragulaModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: DragulaModule });\r\nDragulaModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function DragulaModule_Factory(t) { return new (t || DragulaModule)(); } });\r\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(DragulaModule, { declarations: [DragulaDirective], exports: [DragulaDirective] }); })();\r\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DragulaModule, [{\r\n        type: NgModule,\r\n        args: [{\r\n                exports: [DragulaDirective],\r\n                declarations: [DragulaDirective]\r\n            }]\r\n    }], null, null); })();\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/** @type {?} */\r\nconst MockDrakeFactory = new DrakeFactory((containers, options) => {\r\n    return new MockDrake(containers, options);\r\n});\r\n/**\r\n * You can use MockDrake to simulate Drake events.\r\n *\r\n * The three methods that actually do anything are `on(event, listener)`,\r\n * `destroy()`, and a new method, `emit()`. Use `emit()` to manually emit Drake\r\n * events, and if you injected MockDrake properly with MockDrakeFactory or\r\n * mocked the DragulaService.find() method, then you can make ng2-dragula think\r\n * drags and drops are happening.\r\n *\r\n * Caveats:\r\n *\r\n * 1. YOU MUST MAKE THE DOM CHANGES YOURSELF.\r\n * 2. REPEAT: YOU MUST MAKE THE DOM CHANGES YOURSELF.\r\n *    That means `source.removeChild(el)`, and `target.insertBefore(el)`.\r\n * 3. None of the other methods do anything.\r\n *    That's ok, because ng2-dragula doesn't use them.\r\n */\r\nclass MockDrake {\r\n    /**\r\n     * @param {?=} containers A list of container elements.\r\n     * @param {?=} options These will NOT be used. At all.\r\n     * @param {?=} models Nonstandard, but useful for testing using `new MockDrake()` directly.\r\n     *               Note, default value is undefined, like a real Drake. Don't change that.\r\n     */\r\n    constructor(containers = [], options = {}, models) {\r\n        this.containers = containers;\r\n        this.options = options;\r\n        this.models = models;\r\n        /* Doesn't represent anything meaningful. */\r\n        this.dragging = false;\r\n        this.emitter$ = new Subject();\r\n        this.subs = new Subscription();\r\n    }\r\n    /**\r\n     * @param {?} item\r\n     * @return {?}\r\n     */\r\n    start(item) {\r\n        this.dragging = true;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    end() {\r\n        this.dragging = false;\r\n    }\r\n    /**\r\n     * @param {?=} revert\r\n     * @return {?}\r\n     */\r\n    cancel(revert) {\r\n        this.dragging = false;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    remove() {\r\n        this.dragging = false;\r\n    }\r\n    /**\r\n     * @param {?} event\r\n     * @param {?} callback\r\n     * @return {?}\r\n     */\r\n    on(event, callback) {\r\n        this.subs.add(this.emitter$\r\n            .pipe(filter(({ eventType }) => eventType === event))\r\n            .subscribe(({ args }) => {\r\n            callback(...args);\r\n        }));\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    destroy() {\r\n        this.subs.unsubscribe();\r\n    }\r\n    /**\r\n     * This is the most useful method. You can use it to manually fire events that would normally\r\n     * be fired by a real drake.\r\n     *\r\n     * You're likely most interested in firing `drag`, `remove` and `drop`, the three events\r\n     * DragulaService uses to implement [dragulaModel].\r\n     *\r\n     * See https://github.com/bevacqua/dragula#drakeon-events for what you should emit (and in what order).\r\n     *\r\n     * (Note also, firing dropModel and removeModel won't work. You would have to mock DragulaService for that.)\r\n     * @param {?} eventType\r\n     * @param {...?} args\r\n     * @return {?}\r\n     */\r\n    emit(eventType, ...args) {\r\n        this.emitter$.next({ eventType, args });\r\n    }\r\n}\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n\r\nexport { DragulaDirective, DragulaService, DragulaModule, dragula, DrakeFactory, Group, EventTypes, MockDrake, MockDrakeFactory };\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6LzM3MC9Qcm9qZWN0IGNvZGUvZ3JhZHVzL25vZGVfbW9kdWxlcy9uZzItZHJhZ3VsYS9kaXN0L2Zlc20yMDE1L25nMi1kcmFndWxhLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztBQVVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBOFBDLHlHQUdDOzs7Ozs7Ozs7a0NBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBc0pELDhRQUdDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBZ0JEOzs7Ozs7OzswQkFNQyIsImZpbGUiOiJuZzItZHJhZ3VsYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRyYWd1bGFFeHB0IGZyb20gJ2RyYWd1bGEnO1xuaW1wb3J0IGRyYWd1bGFFeHB0X19kZWZhdWx0LCB7ICB9IGZyb20gJ2RyYWd1bGEnO1xuaW1wb3J0IHsgSW5qZWN0YWJsZSwgT3B0aW9uYWwsIERpcmVjdGl2ZSwgSW5wdXQsIE91dHB1dCwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBmaWx0ZXIsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc30gY2hlY2tlZCBieSB0c2NcbiAqL1xuY2xhc3MgR3JvdXAge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gbmFtZVxuICAgICAqIEBwYXJhbSB7P30gZHJha2VcbiAgICAgKiBAcGFyYW0gez99IG9wdGlvbnNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBkcmFrZSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmRyYWtlID0gZHJha2U7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuaW5pdEV2ZW50cyA9IGZhbHNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc30gY2hlY2tlZCBieSB0c2NcbiAqL1xuLyoqIEBlbnVtIHtzdHJpbmd9ICovXG5jb25zdCBFdmVudFR5cGVzID0ge1xuICAgIENhbmNlbDogXCJjYW5jZWxcIixcbiAgICBDbG9uZWQ6IFwiY2xvbmVkXCIsXG4gICAgRHJhZzogXCJkcmFnXCIsXG4gICAgRHJhZ0VuZDogXCJkcmFnZW5kXCIsXG4gICAgRHJvcDogXCJkcm9wXCIsXG4gICAgT3V0OiBcIm91dFwiLFxuICAgIE92ZXI6IFwib3ZlclwiLFxuICAgIFJlbW92ZTogXCJyZW1vdmVcIixcbiAgICBTaGFkb3c6IFwic2hhZG93XCIsXG4gICAgRHJvcE1vZGVsOiBcImRyb3BNb2RlbFwiLFxuICAgIFJlbW92ZU1vZGVsOiBcInJlbW92ZU1vZGVsXCIsXG59O1xuLyoqIEB0eXBlIHs/fSAqL1xuY29uc3QgQWxsRXZlbnRzID0gT2JqZWN0LmtleXMoRXZlbnRUeXBlcykubWFwKGsgPT4gLyoqIEB0eXBlIHs/fSAqLyAoRXZlbnRUeXBlc1svKiogQHR5cGUgez99ICovIChrKV0pKTtcblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc30gY2hlY2tlZCBieSB0c2NcbiAqL1xuLyoqIEB0eXBlIHs/fSAqL1xuY29uc3QgZHJhZ3VsYSA9IGRyYWd1bGFFeHB0X19kZWZhdWx0IHx8IGRyYWd1bGFFeHB0O1xuY2xhc3MgRHJha2VGYWN0b3J5IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez89fSBidWlsZFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGJ1aWxkID0gZHJhZ3VsYSkge1xuICAgICAgICB0aGlzLmJ1aWxkID0gYnVpbGQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBjaGVja2VkIGJ5IHRzY1xuICovXG4vKiogQHR5cGUgez99ICovXG5jb25zdCBmaWx0ZXJFdmVudCA9IChldmVudFR5cGUsIGZpbHRlckRyYWdUeXBlLCBwcm9qZWN0b3IpID0+IChpbnB1dCkgPT4ge1xuICAgIHJldHVybiBpbnB1dC5waXBlKGZpbHRlcigoeyBldmVudCwgbmFtZSB9KSA9PiB7XG4gICAgICAgIHJldHVybiBldmVudCA9PT0gZXZlbnRUeXBlXG4gICAgICAgICAgICAmJiAoZmlsdGVyRHJhZ1R5cGUgPT09IHVuZGVmaW5lZCB8fCBuYW1lID09PSBmaWx0ZXJEcmFnVHlwZSk7XG4gICAgfSksIG1hcCgoeyBuYW1lLCBhcmdzIH0pID0+IHByb2plY3RvcihuYW1lLCBhcmdzKSkpO1xufTtcbi8qKiBAdHlwZSB7P30gKi9cbmNvbnN0IGVsQ29udGFpbmVyU291cmNlUHJvamVjdG9yID0gKG5hbWUsIFtlbCwgY29udGFpbmVyLCBzb3VyY2VdKSA9PiAoeyBuYW1lLCBlbCwgY29udGFpbmVyLCBzb3VyY2UgfSk7XG5jbGFzcyBEcmFndWxhU2VydmljZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/PX0gZHJha2VGYWN0b3J5XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZHJha2VGYWN0b3J5ID0gbnVsbCkge1xuICAgICAgICB0aGlzLmRyYWtlRmFjdG9yeSA9IGRyYWtlRmFjdG9yeTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmRyYWcgPSAoZ3JvdXBOYW1lKSA9PiB0aGlzLmRpc3BhdGNoJC5waXBlKGZpbHRlckV2ZW50KEV2ZW50VHlwZXMuRHJhZywgZ3JvdXBOYW1lLCAobmFtZSwgW2VsLCBzb3VyY2VdKSA9PiAoeyBuYW1lLCBlbCwgc291cmNlIH0pKSk7XG4gICAgICAgIHRoaXMuZHJhZ2VuZCA9IChncm91cE5hbWUpID0+IHRoaXMuZGlzcGF0Y2gkLnBpcGUoZmlsdGVyRXZlbnQoRXZlbnRUeXBlcy5EcmFnRW5kLCBncm91cE5hbWUsIChuYW1lLCBbZWxdKSA9PiAoeyBuYW1lLCBlbCB9KSkpO1xuICAgICAgICB0aGlzLmRyb3AgPSAoZ3JvdXBOYW1lKSA9PiB0aGlzLmRpc3BhdGNoJC5waXBlKGZpbHRlckV2ZW50KEV2ZW50VHlwZXMuRHJvcCwgZ3JvdXBOYW1lLCAobmFtZSwgW2VsLCB0YXJnZXQsIHNvdXJjZSwgc2libGluZ10pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IG5hbWUsIGVsLCB0YXJnZXQsIHNvdXJjZSwgc2libGluZyB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuZWxDb250YWluZXJTb3VyY2UgPSAoZXZlbnRUeXBlKSA9PiAoZ3JvdXBOYW1lKSA9PiB0aGlzLmRpc3BhdGNoJC5waXBlKGZpbHRlckV2ZW50KGV2ZW50VHlwZSwgZ3JvdXBOYW1lLCBlbENvbnRhaW5lclNvdXJjZVByb2plY3RvcikpO1xuICAgICAgICB0aGlzLmNhbmNlbCA9IHRoaXMuZWxDb250YWluZXJTb3VyY2UoRXZlbnRUeXBlcy5DYW5jZWwpO1xuICAgICAgICB0aGlzLnJlbW92ZSA9IHRoaXMuZWxDb250YWluZXJTb3VyY2UoRXZlbnRUeXBlcy5SZW1vdmUpO1xuICAgICAgICB0aGlzLnNoYWRvdyA9IHRoaXMuZWxDb250YWluZXJTb3VyY2UoRXZlbnRUeXBlcy5TaGFkb3cpO1xuICAgICAgICB0aGlzLm92ZXIgPSB0aGlzLmVsQ29udGFpbmVyU291cmNlKEV2ZW50VHlwZXMuT3Zlcik7XG4gICAgICAgIHRoaXMub3V0ID0gdGhpcy5lbENvbnRhaW5lclNvdXJjZShFdmVudFR5cGVzLk91dCk7XG4gICAgICAgIHRoaXMuY2xvbmVkID0gKGdyb3VwTmFtZSkgPT4gdGhpcy5kaXNwYXRjaCQucGlwZShmaWx0ZXJFdmVudChFdmVudFR5cGVzLkNsb25lZCwgZ3JvdXBOYW1lLCAobmFtZSwgW2Nsb25lLCBvcmlnaW5hbCwgY2xvbmVUeXBlXSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHsgbmFtZSwgY2xvbmUsIG9yaWdpbmFsLCBjbG9uZVR5cGUgfTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmRyb3BNb2RlbCA9IChncm91cE5hbWUpID0+IHRoaXMuZGlzcGF0Y2gkLnBpcGUoZmlsdGVyRXZlbnQoRXZlbnRUeXBlcy5Ecm9wTW9kZWwsIGdyb3VwTmFtZSwgKG5hbWUsIFtlbCwgdGFyZ2V0LCBzb3VyY2UsIHNpYmxpbmcsIGl0ZW0sIHNvdXJjZU1vZGVsLCB0YXJnZXRNb2RlbCwgc291cmNlSW5kZXgsIHRhcmdldEluZGV4XSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHsgbmFtZSwgZWwsIHRhcmdldCwgc291cmNlLCBzaWJsaW5nLCBpdGVtLCBzb3VyY2VNb2RlbCwgdGFyZ2V0TW9kZWwsIHNvdXJjZUluZGV4LCB0YXJnZXRJbmRleCB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMucmVtb3ZlTW9kZWwgPSAoZ3JvdXBOYW1lKSA9PiB0aGlzLmRpc3BhdGNoJC5waXBlKGZpbHRlckV2ZW50KEV2ZW50VHlwZXMuUmVtb3ZlTW9kZWwsIGdyb3VwTmFtZSwgKG5hbWUsIFtlbCwgY29udGFpbmVyLCBzb3VyY2UsIGl0ZW0sIHNvdXJjZU1vZGVsLCBzb3VyY2VJbmRleF0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IG5hbWUsIGVsLCBjb250YWluZXIsIHNvdXJjZSwgaXRlbSwgc291cmNlTW9kZWwsIHNvdXJjZUluZGV4IH07XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5ncm91cHMgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuZHJha2VGYWN0b3J5ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWtlRmFjdG9yeSA9IG5ldyBEcmFrZUZhY3RvcnkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdWJsaWMgbWFpbmx5IGZvciB0ZXN0aW5nIHB1cnBvc2VzLiBQcmVmZXIgYGNyZWF0ZUdyb3VwKClgLlxuICAgICAqIEBwYXJhbSB7P30gZ3JvdXBcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIGFkZChncm91cCkge1xuICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgIGxldCBleGlzdGluZ0dyb3VwID0gdGhpcy5maW5kKGdyb3VwLm5hbWUpO1xuICAgICAgICBpZiAoZXhpc3RpbmdHcm91cCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHcm91cCBuYW1lZDogXCInICsgZ3JvdXAubmFtZSArICdcIiBhbHJlYWR5IGV4aXN0cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdyb3Vwc1tncm91cC5uYW1lXSA9IGdyb3VwO1xuICAgICAgICB0aGlzLmhhbmRsZU1vZGVscyhncm91cCk7XG4gICAgICAgIHRoaXMuc2V0dXBFdmVudHMoZ3JvdXApO1xuICAgICAgICByZXR1cm4gZ3JvdXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gbmFtZVxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgZmluZChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyb3Vwc1tuYW1lXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBuYW1lXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBkZXN0cm95KG5hbWUpIHtcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLmZpbmQobmFtZSk7XG4gICAgICAgIGlmICghZ3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBncm91cC5kcmFrZSAmJiBncm91cC5kcmFrZS5kZXN0cm95KCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmdyb3Vwc1tuYW1lXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGdyb3VwIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lIGFuZCBvcHRpb25zLlxuICAgICAqXG4gICAgICogTm90ZTogZm9ybWVybHkga25vd24gYXMgYHNldE9wdGlvbnNgXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKiBAcGFyYW0gez99IG5hbWVcbiAgICAgKiBAcGFyYW0gez99IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIGNyZWF0ZUdyb3VwKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKG5ldyBHcm91cChuYW1lLCB0aGlzLmRyYWtlRmFjdG9yeS5idWlsZChbXSwgb3B0aW9ucyksIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBfXzBcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIGhhbmRsZU1vZGVscyh7IG5hbWUsIGRyYWtlLCBvcHRpb25zIH0pIHtcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBsZXQgZHJhZ0VsbTtcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBsZXQgZHJhZ0luZGV4O1xuICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgIGxldCBkcm9wSW5kZXg7XG4gICAgICAgIGRyYWtlLm9uKCdyZW1vdmUnLCAoZWwsIGNvbnRhaW5lciwgc291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWRyYWtlLm1vZGVscykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgICAgIGxldCBzb3VyY2VNb2RlbCA9IGRyYWtlLm1vZGVsc1tkcmFrZS5jb250YWluZXJzLmluZGV4T2Yoc291cmNlKV07XG4gICAgICAgICAgICBzb3VyY2VNb2RlbCA9IHNvdXJjZU1vZGVsLnNsaWNlKDApO1xuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHNvdXJjZU1vZGVsLnNwbGljZShkcmFnSW5kZXgsIDEpWzBdO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1JFTU9WRScpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc291cmNlTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCQubmV4dCh7XG4gICAgICAgICAgICAgICAgZXZlbnQ6IEV2ZW50VHlwZXMuUmVtb3ZlTW9kZWwsXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBhcmdzOiBbZWwsIGNvbnRhaW5lciwgc291cmNlLCBpdGVtLCBzb3VyY2VNb2RlbCwgZHJhZ0luZGV4XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkcmFrZS5vbignZHJhZycsIChlbCwgc291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWRyYWtlLm1vZGVscykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRyYWdFbG0gPSBlbDtcbiAgICAgICAgICAgIGRyYWdJbmRleCA9IHRoaXMuZG9tSW5kZXhPZihlbCwgc291cmNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRyYWtlLm9uKCdkcm9wJywgKGRyb3BFbG0sIHRhcmdldCwgc291cmNlLCBzaWJsaW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWRyYWtlLm1vZGVscyB8fCAhdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZHJvcEluZGV4ID0gdGhpcy5kb21JbmRleE9mKGRyb3BFbG0sIHRhcmdldCk7XG4gICAgICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgICAgICBsZXQgc291cmNlTW9kZWwgPSBkcmFrZS5tb2RlbHNbZHJha2UuY29udGFpbmVycy5pbmRleE9mKHNvdXJjZSldO1xuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICAgICAgbGV0IHRhcmdldE1vZGVsID0gZHJha2UubW9kZWxzW2RyYWtlLmNvbnRhaW5lcnMuaW5kZXhPZih0YXJnZXQpXTtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgICAgIGxldCBpdGVtO1xuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gc291cmNlKSB7XG4gICAgICAgICAgICAgICAgc291cmNlTW9kZWwgPSBzb3VyY2VNb2RlbC5zbGljZSgwKTtcbiAgICAgICAgICAgICAgICBpdGVtID0gc291cmNlTW9kZWwuc3BsaWNlKGRyYWdJbmRleCwgMSlbMF07XG4gICAgICAgICAgICAgICAgc291cmNlTW9kZWwuc3BsaWNlKGRyb3BJbmRleCwgMCwgaXRlbSk7XG4gICAgICAgICAgICAgICAgLy8gdGhpcyB3YXMgdHJ1ZSBiZWZvcmUgd2UgY2xvbmVkIGFuZCB1cGRhdGVkIHNvdXJjZU1vZGVsLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCB0YXJnZXRNb2RlbCBzdGlsbCBoYXMgdGhlIG9sZCB2YWx1ZVxuICAgICAgICAgICAgICAgIHRhcmdldE1vZGVsID0gc291cmNlTW9kZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgICAgICAgICAgbGV0IGlzQ29weWluZyA9IGRyYWdFbG0gIT09IGRyb3BFbG07XG4gICAgICAgICAgICAgICAgaXRlbSA9IHNvdXJjZU1vZGVsW2RyYWdJbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKGlzQ29weWluZykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMuY29weUl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklmIHlvdSBoYXZlIGVuYWJsZWQgYGNvcHlgIG9uIGEgZ3JvdXAsIHlvdSBtdXN0IHByb3ZpZGUgYSBgY29weUl0ZW1gIGZ1bmN0aW9uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gb3B0aW9ucy5jb3B5SXRlbShpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFpc0NvcHlpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlTW9kZWwgPSBzb3VyY2VNb2RlbC5zbGljZSgwKTtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlTW9kZWwuc3BsaWNlKGRyYWdJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhcmdldE1vZGVsID0gdGFyZ2V0TW9kZWwuc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0TW9kZWwuc3BsaWNlKGRyb3BJbmRleCwgMCwgaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzQ29weWluZykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUNoaWxkKGRyb3BFbG0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoJC5uZXh0KHtcbiAgICAgICAgICAgICAgICBldmVudDogRXZlbnRUeXBlcy5Ecm9wTW9kZWwsXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBhcmdzOiBbZHJvcEVsbSwgdGFyZ2V0LCBzb3VyY2UsIHNpYmxpbmcsIGl0ZW0sIHNvdXJjZU1vZGVsLCB0YXJnZXRNb2RlbCwgZHJhZ0luZGV4LCBkcm9wSW5kZXhdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gZ3JvdXBcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIHNldHVwRXZlbnRzKGdyb3VwKSB7XG4gICAgICAgIGlmIChncm91cC5pbml0RXZlbnRzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXAuaW5pdEV2ZW50cyA9IHRydWU7XG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgY29uc3QgbmFtZSA9IGdyb3VwLm5hbWU7XG4gICAgICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICAgICAgbGV0IGVtaXR0ZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGdyb3VwLmRyYWtlLm9uKGV2ZW50LCAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2gkLm5leHQoeyBldmVudCwgbmFtZSwgYXJncyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBBbGxFdmVudHMuZm9yRWFjaChlbWl0dGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBjaGlsZFxuICAgICAqIEBwYXJhbSB7P30gcGFyZW50XG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBkb21JbmRleE9mKGNoaWxkLCBwYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwocGFyZW50LmNoaWxkcmVuLCBjaGlsZCk7XG4gICAgfVxufVxuRHJhZ3VsYVNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbi8qKiBAbm9jb2xsYXBzZSAqL1xuRHJhZ3VsYVNlcnZpY2UuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBEcmFrZUZhY3RvcnksIGRlY29yYXRvcnM6IFt7IHR5cGU6IE9wdGlvbmFsIH1dIH1cbl07XG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXG4gKi9cbmNsYXNzIERyYWd1bGFEaXJlY3RpdmUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gZWxcbiAgICAgKiBAcGFyYW0gez99IGRyYWd1bGFTZXJ2aWNlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZWwsIGRyYWd1bGFTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZWwgPSBlbDtcbiAgICAgICAgdGhpcy5kcmFndWxhU2VydmljZSA9IGRyYWd1bGFTZXJ2aWNlO1xuICAgICAgICB0aGlzLmRyYWd1bGFNb2RlbENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBnZXQgY29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbCAmJiB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gY2hhbmdlc1xuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBpZiAoY2hhbmdlcyAmJiBjaGFuZ2VzLmRyYWd1bGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcHJldmlvdXNWYWx1ZTogcHJldiwgY3VycmVudFZhbHVlOiBjdXJyZW50LCBmaXJzdENoYW5nZSB9ID0gY2hhbmdlcy5kcmFndWxhO1xuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICAgICAgbGV0IGhhZFByZXZpb3VzVmFsdWUgPSAhIXByZXY7XG4gICAgICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgICAgICBsZXQgaGFzTmV3VmFsdWUgPSAhIWN1cnJlbnQ7XG4gICAgICAgICAgICAvLyBzb21ldGhpbmcgLT4gbnVsbCAgICAgICA9PiAgdGVhcmRvd24gb25seVxuICAgICAgICAgICAgLy8gc29tZXRoaW5nIC0+IHNvbWV0aGluZyAgPT4gIHRlYXJkb3duLCB0aGVuIHNldHVwXG4gICAgICAgICAgICAvLyAgICAgIG51bGwgLT4gc29tZXRoaW5nICA9PiAgc2V0dXAgb25seVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICAgbnVsbCAtPiBudWxsIChwcmVjbHVkZWQgYnkgZmFjdCBvZiBjaGFuZ2UgYmVpbmcgcHJlc2VudClcbiAgICAgICAgICAgIGlmIChoYWRQcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZWFyZG93bihwcmV2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNOZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaGFuZ2VzICYmIGNoYW5nZXMuZHJhZ3VsYU1vZGVsKSB7XG4gICAgICAgICAgICBjb25zdCB7IHByZXZpb3VzVmFsdWU6IHByZXYsIGN1cnJlbnRWYWx1ZTogY3VycmVudCwgZmlyc3RDaGFuZ2UgfSA9IGNoYW5nZXMuZHJhZ3VsYU1vZGVsO1xuICAgICAgICAgICAgY29uc3QgeyBkcmFrZSB9ID0gdGhpcy5ncm91cDtcbiAgICAgICAgICAgIGlmICh0aGlzLmRyYWd1bGEgJiYgZHJha2UpIHtcbiAgICAgICAgICAgICAgICBkcmFrZS5tb2RlbHMgPSBkcmFrZS5tb2RlbHMgfHwgW107XG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICAgICAgICAgIGxldCBwcmV2SW5kZXggPSBkcmFrZS5tb2RlbHMuaW5kZXhPZihwcmV2KTtcbiAgICAgICAgICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgdGhlIHByZXZpb3VzXG4gICAgICAgICAgICAgICAgICAgIGRyYWtlLm1vZGVscy5zcGxpY2UocHJldkluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWF5YmUgaW5zZXJ0IGEgbmV3IG9uZSBhdCB0aGUgc2FtZSBzcG90XG4gICAgICAgICAgICAgICAgICAgIGlmICghIWN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWtlLm1vZGVscy5zcGxpY2UocHJldkluZGV4LCAwLCBjdXJyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghIWN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gcHJldmlvdXMgb25lIHRvIHJlbW92ZTsganVzdCBwdXNoIHRoaXMgb25lLlxuICAgICAgICAgICAgICAgICAgICBkcmFrZS5tb2RlbHMucHVzaChjdXJyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBzZXR1cCgpIHtcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBsZXQgY2hlY2tNb2RlbCA9IChncm91cCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ3VsYU1vZGVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwLmRyYWtlLm1vZGVscykge1xuICAgICAgICAgICAgICAgICAgICBncm91cC5kcmFrZS5tb2RlbHMucHVzaCh0aGlzLmRyYWd1bGFNb2RlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBncm91cC5kcmFrZS5tb2RlbHMgPSBbdGhpcy5kcmFndWxhTW9kZWxdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLmRyYWd1bGFTZXJ2aWNlLmZpbmQodGhpcy5kcmFndWxhKTtcbiAgICAgICAgaWYgKCFncm91cCkge1xuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIGdyb3VwID0gdGhpcy5kcmFndWxhU2VydmljZS5jcmVhdGVHcm91cCh0aGlzLmRyYWd1bGEsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVuc3VyZSBtb2RlbCBhbmQgY29udGFpbmVyIGVsZW1lbnQgYXJlIHB1c2hlZFxuICAgICAgICBjaGVja01vZGVsKGdyb3VwKTtcbiAgICAgICAgZ3JvdXAuZHJha2UuY29udGFpbmVycy5wdXNoKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmUodGhpcy5kcmFndWxhKTtcbiAgICAgICAgdGhpcy5ncm91cCA9IGdyb3VwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IG5hbWVcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIHN1YnNjcmliZShuYW1lKSB7XG4gICAgICAgIHRoaXMuc3VicyA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgdGhpcy5zdWJzLmFkZCh0aGlzLmRyYWd1bGFTZXJ2aWNlXG4gICAgICAgICAgICAuZHJvcE1vZGVsKG5hbWUpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IHNvdXJjZSwgdGFyZ2V0LCBzb3VyY2VNb2RlbCwgdGFyZ2V0TW9kZWwgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNvdXJjZSA9PT0gdGhpcy5lbC5uYXRpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFndWxhTW9kZWxDaGFuZ2UuZW1pdChzb3VyY2VNb2RlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0YXJnZXQgPT09IHRoaXMuZWwubmF0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ3VsYU1vZGVsQ2hhbmdlLmVtaXQodGFyZ2V0TW9kZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuc3Vicy5hZGQodGhpcy5kcmFndWxhU2VydmljZVxuICAgICAgICAgICAgLnJlbW92ZU1vZGVsKG5hbWUpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IHNvdXJjZSwgc291cmNlTW9kZWwgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKHNvdXJjZSA9PT0gdGhpcy5lbC5uYXRpdmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFndWxhTW9kZWxDaGFuZ2UuZW1pdChzb3VyY2VNb2RlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBncm91cE5hbWVcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIHRlYXJkb3duKGdyb3VwTmFtZSkge1xuICAgICAgICBpZiAodGhpcy5zdWJzKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogQHR5cGUgez99ICovXG4gICAgICAgIGNvbnN0IGdyb3VwID0gdGhpcy5kcmFndWxhU2VydmljZS5maW5kKGdyb3VwTmFtZSk7XG4gICAgICAgIGlmIChncm91cCkge1xuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICAgICAgY29uc3QgaXRlbVRvUmVtb3ZlID0gZ3JvdXAuZHJha2UuY29udGFpbmVycy5pbmRleE9mKHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoaXRlbVRvUmVtb3ZlICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGdyb3VwLmRyYWtlLmNvbnRhaW5lcnMuc3BsaWNlKGl0ZW1Ub1JlbW92ZSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kcmFndWxhTW9kZWwgJiYgZ3JvdXAuZHJha2UgJiYgZ3JvdXAuZHJha2UubW9kZWxzKSB7XG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICAgICAgICAgIGxldCBtb2RlbEluZGV4ID0gZ3JvdXAuZHJha2UubW9kZWxzLmluZGV4T2YodGhpcy5kcmFndWxhTW9kZWwpO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBncm91cC5kcmFrZS5tb2RlbHMuc3BsaWNlKG1vZGVsSW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLnRlYXJkb3duKHRoaXMuZHJhZ3VsYSk7XG4gICAgfVxufVxuRHJhZ3VsYURpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1tkcmFndWxhXScgfSxdIH1cbl07XG4vKiogQG5vY29sbGFwc2UgKi9cbkRyYWd1bGFEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBEcmFndWxhU2VydmljZSB9XG5dO1xuRHJhZ3VsYURpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBkcmFndWxhOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkcmFndWxhTW9kZWw6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRyYWd1bGFNb2RlbENoYW5nZTogW3sgdHlwZTogT3V0cHV0IH1dXG59O1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBjaGVja2VkIGJ5IHRzY1xuICovXG5jbGFzcyBEcmFndWxhTW9kdWxlIHtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIHN0YXRpYyBmb3JSb290KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IERyYWd1bGFNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtEcmFndWxhU2VydmljZV1cbiAgICAgICAgfTtcbiAgICB9XG59XG5EcmFndWxhTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbRHJhZ3VsYURpcmVjdGl2ZV0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbRHJhZ3VsYURpcmVjdGl2ZV0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc30gY2hlY2tlZCBieSB0c2NcbiAqL1xuLyoqIEB0eXBlIHs/fSAqL1xuY29uc3QgTW9ja0RyYWtlRmFjdG9yeSA9IG5ldyBEcmFrZUZhY3RvcnkoKGNvbnRhaW5lcnMsIG9wdGlvbnMpID0+IHtcbiAgICByZXR1cm4gbmV3IE1vY2tEcmFrZShjb250YWluZXJzLCBvcHRpb25zKTtcbn0pO1xuLyoqXG4gKiBZb3UgY2FuIHVzZSBNb2NrRHJha2UgdG8gc2ltdWxhdGUgRHJha2UgZXZlbnRzLlxuICpcbiAqIFRoZSB0aHJlZSBtZXRob2RzIHRoYXQgYWN0dWFsbHkgZG8gYW55dGhpbmcgYXJlIGBvbihldmVudCwgbGlzdGVuZXIpYCxcbiAqIGBkZXN0cm95KClgLCBhbmQgYSBuZXcgbWV0aG9kLCBgZW1pdCgpYC4gVXNlIGBlbWl0KClgIHRvIG1hbnVhbGx5IGVtaXQgRHJha2VcbiAqIGV2ZW50cywgYW5kIGlmIHlvdSBpbmplY3RlZCBNb2NrRHJha2UgcHJvcGVybHkgd2l0aCBNb2NrRHJha2VGYWN0b3J5IG9yXG4gKiBtb2NrZWQgdGhlIERyYWd1bGFTZXJ2aWNlLmZpbmQoKSBtZXRob2QsIHRoZW4geW91IGNhbiBtYWtlIG5nMi1kcmFndWxhIHRoaW5rXG4gKiBkcmFncyBhbmQgZHJvcHMgYXJlIGhhcHBlbmluZy5cbiAqXG4gKiBDYXZlYXRzOlxuICpcbiAqIDEuIFlPVSBNVVNUIE1BS0UgVEhFIERPTSBDSEFOR0VTIFlPVVJTRUxGLlxuICogMi4gUkVQRUFUOiBZT1UgTVVTVCBNQUtFIFRIRSBET00gQ0hBTkdFUyBZT1VSU0VMRi5cbiAqICAgIFRoYXQgbWVhbnMgYHNvdXJjZS5yZW1vdmVDaGlsZChlbClgLCBhbmQgYHRhcmdldC5pbnNlcnRCZWZvcmUoZWwpYC5cbiAqIDMuIE5vbmUgb2YgdGhlIG90aGVyIG1ldGhvZHMgZG8gYW55dGhpbmcuXG4gKiAgICBUaGF0J3Mgb2ssIGJlY2F1c2UgbmcyLWRyYWd1bGEgZG9lc24ndCB1c2UgdGhlbS5cbiAqL1xuY2xhc3MgTW9ja0RyYWtlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez89fSBjb250YWluZXJzIEEgbGlzdCBvZiBjb250YWluZXIgZWxlbWVudHMuXG4gICAgICogQHBhcmFtIHs/PX0gb3B0aW9ucyBUaGVzZSB3aWxsIE5PVCBiZSB1c2VkLiBBdCBhbGwuXG4gICAgICogQHBhcmFtIHs/PX0gbW9kZWxzIE5vbnN0YW5kYXJkLCBidXQgdXNlZnVsIGZvciB0ZXN0aW5nIHVzaW5nIGBuZXcgTW9ja0RyYWtlKClgIGRpcmVjdGx5LlxuICAgICAqICAgICAgICAgICAgICAgTm90ZSwgZGVmYXVsdCB2YWx1ZSBpcyB1bmRlZmluZWQsIGxpa2UgYSByZWFsIERyYWtlLiBEb24ndCBjaGFuZ2UgdGhhdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJzID0gW10sIG9wdGlvbnMgPSB7fSwgbW9kZWxzKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVycyA9IGNvbnRhaW5lcnM7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMubW9kZWxzID0gbW9kZWxzO1xuICAgICAgICAvKiBEb2Vzbid0IHJlcHJlc2VudCBhbnl0aGluZyBtZWFuaW5nZnVsLiAqL1xuICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW1pdHRlciQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnN1YnMgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gaXRlbVxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgc3RhcnQoaXRlbSkge1xuICAgICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBlbmQoKSB7XG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/PX0gcmV2ZXJ0XG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBjYW5jZWwocmV2ZXJ0KSB7XG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICByZW1vdmUoKSB7XG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/fSBldmVudFxuICAgICAqIEBwYXJhbSB7P30gY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIG9uKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLnN1YnMuYWRkKHRoaXMuZW1pdHRlciRcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoeyBldmVudFR5cGUgfSkgPT4gZXZlbnRUeXBlID09PSBldmVudCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IGFyZ3MgfSkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnN1YnMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyB0aGUgbW9zdCB1c2VmdWwgbWV0aG9kLiBZb3UgY2FuIHVzZSBpdCB0byBtYW51YWxseSBmaXJlIGV2ZW50cyB0aGF0IHdvdWxkIG5vcm1hbGx5XG4gICAgICogYmUgZmlyZWQgYnkgYSByZWFsIGRyYWtlLlxuICAgICAqXG4gICAgICogWW91J3JlIGxpa2VseSBtb3N0IGludGVyZXN0ZWQgaW4gZmlyaW5nIGBkcmFnYCwgYHJlbW92ZWAgYW5kIGBkcm9wYCwgdGhlIHRocmVlIGV2ZW50c1xuICAgICAqIERyYWd1bGFTZXJ2aWNlIHVzZXMgdG8gaW1wbGVtZW50IFtkcmFndWxhTW9kZWxdLlxuICAgICAqXG4gICAgICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhI2RyYWtlb24tZXZlbnRzIGZvciB3aGF0IHlvdSBzaG91bGQgZW1pdCAoYW5kIGluIHdoYXQgb3JkZXIpLlxuICAgICAqXG4gICAgICogKE5vdGUgYWxzbywgZmlyaW5nIGRyb3BNb2RlbCBhbmQgcmVtb3ZlTW9kZWwgd29uJ3Qgd29yay4gWW91IHdvdWxkIGhhdmUgdG8gbW9jayBEcmFndWxhU2VydmljZSBmb3IgdGhhdC4pXG4gICAgICogQHBhcmFtIHs/fSBldmVudFR5cGVcbiAgICAgKiBAcGFyYW0gey4uLj99IGFyZ3NcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIGVtaXQoZXZlbnRUeXBlLCAuLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuZW1pdHRlciQubmV4dCh7IGV2ZW50VHlwZSwgYXJncyB9KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc30gY2hlY2tlZCBieSB0c2NcbiAqL1xuXG5leHBvcnQgeyBEcmFndWxhRGlyZWN0aXZlLCBEcmFndWxhU2VydmljZSwgRHJhZ3VsYU1vZHVsZSwgZHJhZ3VsYSwgRHJha2VGYWN0b3J5LCBHcm91cCwgRXZlbnRUeXBlcywgTW9ja0RyYWtlLCBNb2NrRHJha2VGYWN0b3J5IH07XG4iXX0=","export default \"<div fxLayout=\\\"row wrap\\\" fxLayout.xs=\\\"column\\\" [dragula]=\\\"'bag-container'\\\">\\r\\n    <div *ngFor=\\\"let icon of icons\\\" fxFlex=\\\"33.3\\\" class=\\\"flex-p\\\"> \\r\\n        <mat-card class=\\\"draggable\\\">            \\r\\n            <mat-card-header fxLayoutAlign=\\\"center\\\">\\r\\n                <mat-card-subtitle fxLayoutAlign=\\\"center\\\">\\r\\n                    <mat-icon class=\\\"icon-lg\\\">{{icon}}</mat-icon>\\r\\n                </mat-card-subtitle>\\r\\n            </mat-card-header>\\r\\n            <mat-card-content class=\\\"text-center\\\">\\r\\n                There's also the possibility of moving elements around in the same container, changing their position.\\r\\n            </mat-card-content>           \\r\\n        </mat-card>\\r\\n    </div>\\r\\n</div>\\r\\n<div fxLayout=\\\"row\\\">\\r\\n    <div fxFlex=\\\"50\\\" class=\\\"flex-p\\\">\\r\\n        <mat-card>            \\r\\n            <mat-card-header fxLayoutAlign=\\\"center\\\">\\r\\n                <mat-card-subtitle fxLayoutAlign=\\\"center\\\">\\r\\n                    <h2>First Container</h2> \\r\\n                </mat-card-subtitle>\\r\\n            </mat-card-header>\\r\\n            <mat-card-content [dragula]=\\\"'bag-1'\\\" class=\\\"bag\\\">\\r\\n                <mat-card *ngFor=\\\"let color of colors\\\" [class.bg-primary]=\\\"color=='primary'\\\" [class.bg-accent]=\\\"color=='accent'\\\" [class.bg-warn]=\\\"color=='warn'\\\" class=\\\"draggable\\\">\\r\\n                    You can move these elements between these two containers\\r\\n                </mat-card>                 \\r\\n            </mat-card-content>           \\r\\n        </mat-card> \\r\\n    </div>\\r\\n    <div fxFlex=\\\"50\\\" class=\\\"flex-p\\\"> \\r\\n        <mat-card>            \\r\\n            <mat-card-header fxLayoutAlign=\\\"center\\\">\\r\\n                <mat-card-subtitle fxLayoutAlign=\\\"center\\\">\\r\\n                    <h2>Second Container</h2> \\r\\n                </mat-card-subtitle>\\r\\n            </mat-card-header>\\r\\n            <mat-card-content [dragula]=\\\"'bag-1'\\\" class=\\\"bag\\\">\\r\\n                <mat-card *ngFor=\\\"let color of colors\\\" [class.bg-primary]=\\\"color=='primary'\\\" [class.bg-accent]=\\\"color=='accent'\\\" [class.bg-warn]=\\\"color=='warn'\\\"  class=\\\"draggable\\\">\\r\\n                    You can move these elements between these two containers\\r\\n                </mat-card>                 \\r\\n            </mat-card-content>          \\r\\n        </mat-card> \\r\\n    </div>\\r\\n</div>\";","var si = typeof setImmediate === 'function', tick;\r\nif (si) {\r\n  tick = function (fn) { setImmediate(fn); };\r\n} else {\r\n  tick = function (fn) { setTimeout(fn, 0); };\r\n}\r\n\r\nmodule.exports = tick;","export default \".bag {\\n  min-height: 50px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZHJhZy1kcm9wL0Q6XFwzNzBcXEZpbmFsRnJvbnRlbmQvc3JjXFxhcHBcXHBhZ2VzXFxkcmFnLWRyb3BcXGRyYWctZHJvcC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvZHJhZy1kcm9wL2RyYWctZHJvcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9kcmFnLWRyb3AvZHJhZy1kcm9wLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJhZ3tcclxuICAgIG1pbi1oZWlnaHQ6IDUwcHg7XHJcbn0iLCIuYmFnIHtcbiAgbWluLWhlaWdodDogNTBweDtcbn0iXX0= */\";","import { Component } from '@angular/core';\r\nimport { AppSettings } from '../../app.settings';\r\nimport { Settings } from '../../app.settings.model';\r\n\r\n@Component({\r\n  selector: 'app-drag-drop',\r\n  templateUrl: './drag-drop.component.html',\r\n  styleUrls: ['./drag-drop.component.scss']\r\n})\r\nexport class DragDropComponent {\r\n  public icons = [ \"home\", \"person\", \"alarm\", \"work\", \"mail\", \"favorite\"];\r\n  public colors = [ \"accent\", \"primary\", \"warn\" ];\r\n  public settings: Settings;\r\n  constructor(public appSettings:AppSettings) {\r\n    this.settings = this.appSettings.settings; \r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { DragulaModule } from 'ng2-dragula';\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { DragDropComponent } from './drag-drop.component';\r\n\r\nexport const routes = [\r\n  { path: '', component: DragDropComponent, pathMatch: 'full' }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    DragulaModule.forRoot(),\r\n    SharedModule\r\n  ],\r\n  declarations: [\r\n    DragDropComponent\r\n  ]\r\n})\r\nexport class DragDropModule { }"]}