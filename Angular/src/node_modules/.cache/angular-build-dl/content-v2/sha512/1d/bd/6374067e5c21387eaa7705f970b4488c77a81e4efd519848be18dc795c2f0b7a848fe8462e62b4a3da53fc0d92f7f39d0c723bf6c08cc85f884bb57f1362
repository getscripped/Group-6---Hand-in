{"version":3,"sources":["webpack:///src/app/pages/register/register.component.html","webpack:///src/app/Models/register.ts","webpack:///src/app/pages/register/register.component.ts","webpack:///src/app/pages/register/register.module.ts"],"names":["Register","RegisterComponent","appSettings","fb","router","fireStorage","http","basePath","downloadableURL","submit1","submit2","SubmitData","PostData","settings","form","group","compose","required","minLength","validator","file","filePath","IDNum","task","upload","progressValue","percentageChanges","ref","getDownloadURL","then","url","postData","alert","Image","post","subscribe","success","event","target","files","name","length","error","Email","console","log","loadingSpinner","selector","template","routes","path","component","pathMatch","RegisterModule","imports","forChild","declarations"],"mappings":"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","file":"pages-register-register-module-es5.js","sourcesContent":["export default \"<mat-sidenav-container>\\r\\n  \\r\\n    <div fxLayout=\\\"row\\\"  fxLayoutAlign=\\\"center center\\\" class=\\\"h-100\\\">\\r\\n  \\r\\n         <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit($event)\\\" fxFlex=\\\"100\\\"  fxFlex.gt-sm=\\\"40\\\"  >\\r\\n  \\r\\n              <mat-card class=\\\"p-0 mat-elevation-z24 box register\\\">\\r\\n                  <div fxLayout=\\\"column\\\" fxLayoutAlign=\\\"center center\\\" class=\\\"bg-primary box-header\\\">\\r\\n                      <button mat-fab color=\\\"accent\\\" class=\\\"mat-elevation-z12\\\" (click)=\\\"onSubmit(form.value);\\\">\\r\\n                          <mat-icon>person_add</mat-icon>\\r\\n                      </button>\\r\\n                      <a mat-button routerLink=\\\"/login\\\">Already have an account? Sign in!</a>\\r\\n                      \\r\\n                  </div>\\r\\n                  <mat-card-content fxLayout=\\\"column\\\"  fxLayoutAlign=\\\"end center\\\"  class=\\\"box-content\\\">\\r\\n                      <mat-card fxLayout=\\\"column\\\" fxLayoutAlign=\\\"center center\\\" class=\\\"mat-elevation-z12 box-content-inner\\\">\\r\\n                          <span class=\\\"box-content-header\\\">Register Farmer</span>  \\r\\n                          <mat-form-field class=\\\"w-100\\\">\\r\\n                            <input matInput placeholder=\\\"Full Name\\\" formControlName=\\\"name\\\" [(ngModel)] = \\\"SubmitData.Name\\\">\\r\\n                            <mat-error *ngIf=\\\"form.controls.name.errors?.required\\\">Full Name is required</mat-error>\\r\\n                            <mat-error *ngIf=\\\"form.controls.name.hasError('minlength')\\\">Full Name isn't long enough, minimum of 3 characters</mat-error>\\r\\n                          </mat-form-field>\\r\\n                          <mat-form-field class=\\\"w-100\\\">\\r\\n                          <input matInput placeholder=\\\"Surname\\\" formControlName=\\\"surname\\\"  [(ngModel)] = \\\"SubmitData.Surname\\\">\\r\\n                            <mat-error *ngIf=\\\"form.controls.surname.errors?.required\\\">Surname is required</mat-error>\\r\\n                            <mat-error *ngIf=\\\"form.controls.surname.hasError('minlength')\\\">Surname isn't long enough, minimum of 3 characters</mat-error>\\r\\n                          </mat-form-field>\\r\\n                          <mat-form-field class=\\\"w-100\\\">\\r\\n                            <input matInput placeholder=\\\"ID Number\\\" formControlName=\\\"id\\\"  [(ngModel)] = \\\"SubmitData.IDNum\\\" (change) = \\\"checkID()\\\">\\r\\n                              <mat-error *ngIf=\\\"form.controls.id.errors?.required\\\">ID Number is required</mat-error>\\r\\n                              <mat-error *ngIf=\\\"form.controls.id.hasError('minlength')\\\">ID Number invalid</mat-error>\\r\\n                            </mat-form-field>\\r\\n                            <mat-form-field class=\\\"w-100\\\">\\r\\n                                <input matInput placeholder=\\\"Street Address\\\" formControlName=\\\"address\\\"  [(ngModel)] = \\\"SubmitData.Adress\\\">\\r\\n                                  <mat-error *ngIf=\\\"form.controls.address.errors?.required\\\">Address is required</mat-error>\\r\\n                                  <mat-error *ngIf=\\\"form.controls.address.hasError('minlength')\\\">Address invalid</mat-error>\\r\\n                            </mat-form-field>\\r\\n                            <mat-form-field class=\\\"w-100\\\">\\r\\n                                <input matInput placeholder=\\\"Phone Number\\\" formControlName=\\\"number\\\"  [(ngModel)] = \\\"SubmitData.Phone\\\">\\r\\n                                  <mat-error *ngIf=\\\"form.controls.number.errors?.required\\\">Phone Number is required</mat-error>\\r\\n                                  <mat-error *ngIf=\\\"form.controls.number.hasError('minlength')\\\">Phone Number invalid</mat-error>\\r\\n                                </mat-form-field>\\r\\n                          <mat-form-field class=\\\"w-100\\\">\\r\\n                              <input matInput placeholder=\\\"Email\\\" formControlName=\\\"email\\\"  [(ngModel)] = \\\"SubmitData.Email\\\" (blur) = \\\"CheckEmail()\\\">\\r\\n                              <mat-error *ngIf=\\\"form.controls.email.errors?.required\\\">Email is required</mat-error>\\r\\n                              <mat-error *ngIf=\\\"form.controls.email.hasError('invalidEmail')\\\">Invalid email address</mat-error>\\r\\n                          </mat-form-field>\\r\\n                          <mat-form-field class=\\\"w-100\\\">\\r\\n                              <input matInput placeholder=\\\"Password\\\" formControlName=\\\"password\\\" type=\\\"password\\\" minlength=\\\"6\\\"  [(ngModel)] = \\\"SubmitData.Password\\\">\\r\\n                              <mat-error *ngIf=\\\"form.controls.password.errors?.required\\\">Password is required</mat-error>\\r\\n                              <mat-error *ngIf=\\\"form.controls.password.hasError('minlength')\\\">Password isn't long enough, minimum of 6 characters</mat-error>\\r\\n                          </mat-form-field> \\r\\n                          <mat-form-field class=\\\"w-100\\\">\\r\\n                            <input matInput placeholder=\\\"Confirm Password\\\" formControlName=\\\"confirmPassword\\\" type=\\\"password\\\">\\r\\n                            <mat-error *ngIf=\\\"form.controls.confirmPassword.errors?.required\\\">Confirm Password is required</mat-error>\\r\\n                            <mat-error *ngIf=\\\"form.controls.confirmPassword.hasError('mismatchedPasswords')\\\">Passwords do not match</mat-error>\\r\\n                          </mat-form-field>\\r\\n\\r\\n\\r\\n                          \\r\\n                          <label for=\\\"file\\\">Profile photo</label>\\r\\n                            <input   type=\\\"file\\\" accept=\\\".jpeg,.jpg,.png,.svg\\\" (change) = \\\"onSelectedFile($event)\\\" name=\\\"file\\\">\\r\\n\\r\\n                         \\r\\n                      </mat-card>\\r\\n                      <button mat-raised-button color=\\\"primary\\\" class=\\\"mat-elevation-z12 box-button\\\" type=\\\"submit\\\" *ngIf = \\\"submit1 && submit2\\\">SIGN UP</button>\\r\\n                  </mat-card-content>\\r\\n              </mat-card>\\r\\n              \\r\\n         </form>   \\r\\n         <div *ngIf=\\\"progressValue | async as val\\\">\\r\\n          <progress type=\\\"warning\\\"  [value]=\\\"val\\\" style=\\\"height: 7mm; width: 50%\\\" max=\\\"100\\\" ></progress>\\r\\n          <br />\\r\\n            <span *ngIf=\\\"val<100\\\" style=\\\"color:rgb(255, 60, 0); font-size: 17px; font-weight: 410;\\\">{{ val | number}}% </span><span *ngIf=\\\"val == 100\\\" style=\\\"color:rgb(1, 153, 34);  font-size: 17px; font-weight: 410;\\\">Completed !</span>\\r\\n        </div>   \\r\\n    \\r\\n    </div>\\r\\n  \\r\\n  </mat-sidenav-container>\\r\\n\\r\\n\";","export class Register{\r\n    constructor(){}\r\n    public Email: string;\r\n    public Password: string;\r\n    public Name: string;\r\n    public Surname: string;\r\n    public IDNum: string;\r\n    public Adress : string;\r\n    public DOB: Date;\r\n    public Phone : string;\r\n    public Image: string;\r\n}","import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { FormGroup, FormBuilder, Validators} from '@angular/forms';\r\nimport { emailValidator, matchingPasswords } from '../../theme/utils/app-validators';\r\nimport { AppSettings } from '../../app.settings';\r\nimport { Settings } from '../../app.settings.model';\r\nimport { Register } from 'src/app/Models/register';\r\nimport { AngularFireStorage, AngularFireUploadTask  } from '@angular/fire/storage';   //   import <<<<\r\nimport { Observable } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.component.html'\r\n})\r\nexport class RegisterComponent {\r\n  public form:FormGroup;\r\n  public settings: Settings;\r\n\r\n\r\n  basePath = '/images';                       //  <<<<<<<\r\n  downloadableURL = '';                      //  <<<<<<<\r\n  task: AngularFireUploadTask;               //  <<<<<<<\r\n\r\n  submit1: boolean = false;\r\n  submit2: boolean = false;\r\n\r\n\r\n\r\n\r\n\r\n\r\n  constructor(public appSettings:AppSettings, public fb: FormBuilder, public router:Router,private fireStorage: AngularFireStorage,private http: HttpClient){\r\n    this.settings = this.appSettings.settings; \r\n    this.form = this.fb.group({\r\n      'name': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'surname': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'id': [null, Validators.compose([Validators.required, Validators.minLength(13)])],\r\n      'number': [null, Validators.compose([Validators.required, Validators.minLength(10)])],\r\n      'city': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'address': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'postalCode': [null, Validators.compose([Validators.required, Validators.minLength(3)])],\r\n      'email': [null, Validators.compose([Validators.required, emailValidator])],\r\n      'password': ['', Validators.required],\r\n      'confirmPassword': ['', Validators.required]\r\n    },{validator: matchingPasswords('password', 'confirmPassword')});\r\n  }\r\n\r\n\r\n SubmitData = new Register();\r\n PostData = new Register();\r\n\r\nfile: any;\r\nprogressValue: Observable<number>;\r\n  public async onSubmit() {\r\n\r\n     \r\n    if (this.file) {\r\n      \r\n      \r\n       const filePath = `${this.basePath}/${this.SubmitData.IDNum}`;  // path at which image will be stored in the firebase storage\r\n       this.task =  this.fireStorage.upload(filePath, this.file);    // upload task\r\n \r\n       // this.progress = this.snapTask.percentageChanges();\r\n \r\n       this.progressValue = this.task.percentageChanges();\r\n       (await this.task).ref.getDownloadURL().then(url => {this.downloadableURL = url; this.postData()});  // <<< url is found here\r\n      \r\n      \r\n \r\n \r\n     } else {  \r\n       alert('No images selected');\r\n       this.downloadableURL = ''; \r\n      }\r\n \r\n \r\n       \r\n   }\r\n\r\n  postData(){\r\n    \r\n    this.PostData = this.SubmitData;\r\n    this.PostData.Image = this.downloadableURL;\r\n    this.http.post<Register>(\"http://35.178.156.37/api/User/Register\", this.PostData).subscribe(\r\n      success=> {\r\n        alert(\"Registration succesfull!\");\r\n\r\n      }\r\n    );\r\n  }\r\n\r\n  onSelectedFile(event){\r\n    \r\n    \r\n       this.file = event.target.files[0];\r\n       this.file.name = this.SubmitData.IDNum;\r\n     \r\n    \r\n  }\r\n\r\n  checkID(){\r\n\r\n    if(this.SubmitData.IDNum.length == 13){\r\n    this.http.post(\"http://35.178.156.37/api/UserExists\", this.SubmitData.IDNum).subscribe(\r\n      success => {\r\n        this.submit1 = true;\r\n      },\r\n\r\n      error =>{\r\n        alert(\"Id number is already in use\");\r\n        this.SubmitData.IDNum = null;\r\n        this.submit1 = false;\r\n      }\r\n      \r\n    );\r\n    }\r\n  }\r\n\r\n\r\n  CheckEmail(){\r\n\r\n    \r\n    this.http.post(\"http://35.178.156.37/api/UserExists\", this.SubmitData.Email).subscribe(\r\n      success => {\r\n        this.submit2 = true;\r\n      },\r\n\r\n      error =>{\r\n        alert(\"Email is already in use\");\r\n        this.SubmitData.Email = null;\r\n        console.log(error);\r\n        this.submit2 = false;\r\n      }\r\n      \r\n    );\r\n    \r\n  }\r\n\r\n  ngAfterViewInit(){\r\n    this.settings.loadingSpinner = false; \r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { SharedModule } from '../../shared/shared.module';\r\nimport { RegisterComponent } from './register.component';\r\nimport {ScrollingModule} from '@angular/cdk/scrolling';\r\n\r\n\r\nexport const routes = [\r\n  { path: '', component: RegisterComponent, pathMatch: 'full' }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    FormsModule, \r\n    ReactiveFormsModule,\r\n    SharedModule,\r\n    ScrollingModule\r\n  ],\r\n  declarations: [\r\n    RegisterComponent\r\n  ]\r\n})\r\nexport class RegisterModule { }"]}